{% extends "page.html" %}

{% comment %}
###########################################################################
#
#  Copyright 2019 Google Inc.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
#
###########################################################################
{% endcomment %}

{% block content %}

  <h1>Recipes</h1>
  <p class="flow-text">Assemble recipes that run on a schedule or are triggered manually.</p>

  <p>
    <a href="/recipe/edit/" class="waves-effect waves-light btn blue form_button modal-trigger">
      Scheduled <i class="material-icons right">access_time</i>
    </a>
    <a href="/recipe/manual/" class="waves-effect waves-light btn blue form_button modal-trigger">
      Manual <i class="material-icons right">build</i>
    </a>
  </p>


  <table class="bordered highlight list">
    <thead>
      <tr>
        <th>Recipe</th>
        <th></th>
        <th class="center">Status</th>
      </tr>
     </thead>
     <tbody>
       {% for recipe in recipes %}
       {% with log=recipe.get_log %}
         <tr>
           <td style="width:90px;">
             <a href="{{ recipe.link_edit }}"><i class="material-icons medium blue-text">{% if recipe.active %}play_arrow{% else %}pause{% endif %}</i></a>
           </td>
           <td>
             <a href="{{ recipe.link_edit }}">{{ recipe.name }}</a>
             {% if recipe.manual %}
               <br/>Manual Trigger
             {% else %}
               <br/>{% for day in recipe.get_days %}{{ day }}{% if not forloop.last %}, {% endif %}{% endfor %}
               <br/>{% for hour in recipe.get_hours %}{{ hour }}{% if not forloop.last %}, {% endif %}{% endfor %}
             {% endif %}
           </td>
           <td class="center">
             {{ log.percent }}% {{ log.status }}
             <br/>{{ log.ago }}
           </td>
         </tr>
       {% endwith %}
       {% endfor %}
     </tbody>
  </table>

  <br/><br/>
  <h3 id="code-tasks">Need A Custom Task?</h3>
  <p class="flow-text">Ask Google gTech to write one for you <a href="mailto:starthinker-help@google.com?subject=Custom+StarThinker+Recipe">starthinker-help@google.com</a></p>


{% endblock %}
