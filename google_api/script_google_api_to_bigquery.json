{
  "script":{
    "license":"Apache License, Version 2.0",
    "copyright":"Copyright 2018 Google Inc.",
    "open":true,
    "icon":"settings_input_component",
    "product":"Google API",
    "title":"API To BigQuery",
    "description":"Execute a Google API function and store results to BigQuery.",
    "instructions":[
      "Enter an api name and version.",
      "Specify the function using dot notation and arguments using json.",
      "If nextPageToken can be in response check iterate.",
      "Give BigQuery dataset and table where response will be written."
    ],
    "authors":["kenjora@google.com"]
  },
  "tasks":[
    { "google_api":{
      "auth":"user",
      "api":{ "field":{ "name":"api", "kind":"string", "order":1, "default":"doubleclickbidmanager" }},
      "version": { "field":{ "name":"version", "kind":"string", "order":2, "default":"v1" }},
      "function":{ "field":{ "name":"function", "kind":"string", "order":3, "default":"reports.files.list" }},
      "kwargs":{ "field":{ "name":"kwargs", "kind":"json", "order":4, "default":{
          "accountId": 7480,
          "profileId": 2782211,
          "reportId": 132847265
      }}},
      "iterate":{ "field":{ "name":"iterate", "kind":"boolean", "order":5, "default":false }},
      "out": {
        "bigquery":{
          "dataset":{"field":{ "name":"dataset", "kind":"string", "order":6, "default":"" }},
          "table":{ "field":{ "name":"table", "kind":"string", "order":7, "default":"" }},
          "schema":{ "field":{ "name":"schema", "kind":"json", "order":9, "default":[] }},
          "format":"JSON"
        }
      }
    }}
  ]
}
