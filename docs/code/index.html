


<!DOCTYPE html>
<html>
  <head>

    <link rel="shortcut icon" href="https://storage.googleapis.com/starthinker-ui/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://storage.googleapis.com/starthinker-ui/favicon.ico" type="image/x-icon">

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://storage.googleapis.com/starthinker-ui/css/materialize.min.css">

    <style>
       html { color: rgba(68,68,68,1); text-shadow: 5px 5px 15px rgba(168,168,168,0.5); }
 
       #message { justify-content: center; font-size: 2em;}
       #message i { font-size: 2em; margin: 10px; }
       #message ul, #message li { display: inline; margin-left: 10px; }
       #page { width: 100%; max-width: 1280px; min-height: 500px; margin: 0px auto; padding-bottom: 50px; }

       span.square_box {
         display: inline-block;
         width: 40px;
         height: 40px;
         border: 2px solid #fff;
         text-align: center;
         line-height: 40px;
         margin: 5px;
       }

       div.nav-wrapper { padding-left: 1%; padding-right: 1%; }
       h1 a i.material-icons { font-size: 3.28rem; }
       a.brand-logo img { vertical-align: middle; width: 40px; height: 40px; }
       ol li { line-height: 1.8em; }
       textarea { margin-top: 7px; height: 10rem; }
       table.list { width: 96%; max-width: 800px; margin: 0px auto; line-height: 1.8em; }
       a.menu_link { display: inline-block; margin: 20px; }

       div.split { display: flex; align-items: flex-start; justify-content: center; flex-wrap: wrap; width: 100%; margin: 20px auto; }
       div.split_left { flex-grow: 1; flex-basis: 0; min-width: 300px; border-right: 1px solid #eee; padding: 20px; }
       div.split_right { flex-grow: 2; flex-basis: 0; min-width: 300px; padding: 20px; }

       div.service_card { min-height: 250px; width: 300px; margin: 10px;}
       div.service_callouts { display: flex; align-items: flex-start; justify-content: left; flex-wrap: wrap; width: 100%; }
       div.service_callout { min-width: 48%; margin-right: 2%; line-height: 2.4em;}
       div.row { display: flex; align-items: flex-start; justify-content: center; flex-wrap: wrap; }

       #cards { display: flex; align-items: flex-start; justify-content: center; flex-wrap: wrap; width: 100%; }
       #cards div.card { width: 300px; margin: 20px; padding: 0.1px; text-align: left; }
       div.card h4 { width 100%; padding: 20px;}
       div.card h4 i.material-icons { font-size: 2.28rem; }
       div.card table { margin: 0px 5% 30px 5%; width: 90%; }

       .card .card-content .card-title { word-wrap: break-word; }
       div.select-wrapper { margin-top: 2rem; }

       
    </style>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  
  <nav>
    <div class="nav-wrapper">
      <a href="/starthinker/" class="brand-logo">
        <img src="https://storage.googleapis.com/starthinker-ui/StarThinker.png"/>&nbsp;StarThinker
      </a>
      <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        
        
        <li><a href="/starthinker/solution/">Solutions</a></li>
        <li><a href="/starthinker/code/">Coding</a></li>
        
        
      </ul>
      <ul class="side-nav red lighten-2" id="mobile-demo">
        
        
        
        <li><a class="white-text" href="/starthinker/solution/">Solutions</a></li>
        <li><a class="white-text" href="/starthinker/code/">Code</a></li>
        
        
      </ul>
    </div>
  </nav>
  

  <body>
    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://storage.googleapis.com/starthinker-ui/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="https://storage.googleapis.com/starthinker-ui/js/materialize.min.js"></script>

    

    <div id="page" class="center">
      

  <h1 id="recipe-scripts">Creating A Workflow Recipe</h1>
  <p class="flow-text">StarThinker will get your custom solutions prototyped and scaled quickly.<br/>Using the <a href="https://github.com/google/starthinker" target="_blank">open source code</a>, each JSON task can be combined to form custom recipes.</p>  

  <br/><br/>
  <h3 id="code_start">Quick Start</h3>
  <p class="flow-text">Run your first recipe in 5 minutes.</p>

  <table class="bordered highlight list">
    <thead>
      <tr>
        <th class="center" style="width:90px;"></th>
        <th>Instructions</th>
        <th class="center-align" style="width:90px;">Minutes</th>
      </tr>
     </thead>
     <tbody>

       <tr>
         <td><i class="material-icons medium teal-text">file_download</i></td>
         <td>
           <strong>Get the open source code:</strong>
           <br/>git clone https://github.com/google/starthinker
           <br/>cd starthinker
         </td>
         <td class="center-align">1</td>
       </tr>

       <tr>
         <td><i class="material-icons medium teal-text">build</i></td>
         <td>
           <strong>Set up and run using deploy script:</strong>
           <br/>source install/deploy.sh
           <br/>Choose 2) Scientist Setup
           <br/>Then Choose 1) Install All
           <br/>Then Choose 8) Add Recipe
           <br/>Then Choose 10) Run Recipe
         </td>
         <td class="center-align">3</td>
       </tr>

     </tbody>
  </table>

  <br/><br/>
  <h3 id="recipe_code">Creating A Custom Recipe</h3>
  <p class="flow-text">Create a recipe by assembling from scratch or using templates.</p>

  <table class="bordered highlight list">
    <tbody>
      <tr>
        <td style="vertical-align:top;width:90px;"><i class="material-icons medium teal-text">content_paste</i></td>
        <td>
          <strong>Copy the Say Hello recipe and start building a workflow using JSON samples below.</strong>
          <br/>cp gtech/say_hello.json [project_name].json
          <br/>vi [project_name].json
          <br/>python all/run.py [project_name].json --verbose
        </td>
      </tr>
      <tr>
        <td style="vertical-align:top;"><i class="material-icons medium teal-text">list</i></td>
        <td>
           <strong>Create a recipe from a template by running the following and following screen prompts.</strong>
           <br/>python script/run.py gtech/script_dcm_to_bigquery.json
           <br/>python all/run.py [JSON file in step above].json --verbose
        </td>
      </tr>
      <tr>
        <td style="vertical-align:top;"><i class="material-icons medium teal-text">settings</i></td>
        <td>
           <strong>For more detailed instructions see the open source documentations.</strong>
           <br/><a href="https://github.com/google/starthinker/blob/master/README.md">https://github.com/google/starthinker/blob/master/README.md</a>
        </td>
      </tr>
    </tbody>
  </table>

  <br/><br/>
  <h3 id="code-tasks">Available Recipe Tasks</h3>
  <p class="flow-text">Copy and paste the JSON to add tasks to your recipe. Replace <i>{ "field": ... }</i> with your values.</p>

  
     <span class="trigger_product menu_link waves-effect waves-dark btn-flat grey lighten-3" id="trigger_product_1">BigQuery</span>
  
     <span class="trigger_product menu_link waves-effect waves-dark btn-flat grey lighten-3" id="trigger_product_2">DBM</span>
  
     <span class="trigger_product menu_link waves-effect waves-dark btn-flat grey lighten-3" id="trigger_product_3">DCM</span>
  
     <span class="trigger_product menu_link waves-effect waves-dark btn-flat grey lighten-3" id="trigger_product_4">Google API</span>
  
     <span class="trigger_product menu_link waves-effect waves-dark btn-flat grey lighten-3" id="trigger_product_5">Sheets</span>
  
     <span class="trigger_product menu_link waves-effect waves-dark btn-flat grey lighten-3" id="trigger_product_6">Storage</span>
  
     <span class="trigger_product menu_link waves-effect waves-dark btn-flat grey lighten-3" id="trigger_product_7">Twitter</span>
  
     <span class="trigger_product menu_link waves-effect waves-dark btn-flat grey lighten-3" id="trigger_product_8">gTech</span>
  

  <br/><br/>
  
    <table class="view_product bordered highlight list" id="view_product_1">
      <thead>
        <tr>
          <th class="center" style="width:90px;"></th>
          <th>BigQuery</th>
        </tr>
      </thead>
      <tbody>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">device_hub</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_mapping">JSON</span>
            <h4>Column Mapping</h4>
            <p>TASK: mapping</p>
            <p>Use sheet to define keyword to column mappings.</p>
            <ol>
              <li>For the sheet, provide the full URL.</li><li>A tab called <strong>Mapping</strong> will be created.</li><li>Follow the instructions in the tab to complete the mapping.</li><li>The in table should have the columns you want to map.</li><li>The out view will have the new columns created in the mapping.</li>
            </ol>
            <pre class="view_code" id="view_code_mapping" style="display:none;">[
    {
        &quot;mapping&quot;: {
            &quot;in&quot;: {
                &quot;table&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;in_table&quot;, 
                        &quot;order&quot;: 4
                    }
                }, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;in_dataset&quot;, 
                        &quot;order&quot;: 3
                    }
                }
            }, 
            &quot;sheet&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;sheet&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;tab&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;tab&quot;, 
                    &quot;order&quot;: 2
                }
            }, 
            &quot;out&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;out_dataset&quot;, 
                        &quot;order&quot;: 7
                    }
                }, 
                &quot;view&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;out_view&quot;, 
                        &quot;order&quot;: 8
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">folder</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dataset">JSON</span>
            <h4>Dataset</h4>
            <p>TASK: dataset</p>
            <p>Create and permission a dataset in BigQuery.</p>
            <ol>
              <li>Specify the name of the dataset.</li><li>If dataset exists, it is inchanged.</li><li>Add emails and / or groups to add read permission.</li><li>CAUTION: Removing permissions in StarThinker has no effect.</li><li>CAUTION: To remove permissions you have to edit the dataset.</li>
            </ol>
            <pre class="view_code" id="view_code_dataset" style="display:none;">[
    {
        &quot;dataset&quot;: {
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;emails&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string_list&quot;, 
                    &quot;order&quot;: 2, 
                    &quot;description&quot;: &quot;Comma separated emails.&quot;, 
                    &quot;name&quot;: &quot;dataset_emails&quot;
                }
            }, 
            &quot;groups&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string_list&quot;, 
                    &quot;order&quot;: 3, 
                    &quot;description&quot;: &quot;Comma separated groups.&quot;, 
                    &quot;name&quot;: &quot;dataset_groups&quot;
                }
            }, 
            &quot;dataset&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;Name of Google BigQuery dataset to create.&quot;, 
                    &quot;name&quot;: &quot;dataset_dataset&quot;
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">arrow_forward</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_bigquery_query">JSON</span>
            <h4>Query To Table</h4>
            <p>TASK: bigquery_query</p>
            <p>Save query results into a BigQuery table.</p>
            <ol>
              <li>Specify a single query and choose legacy or standard mode.</li><li>For PLX use: SELECT * FROM [plx.google:FULL_TABLE_NAME.all] WHERE...</li><li>Every time the query runs it will overwrite the table.</li>
            </ol>
            <pre class="view_code" id="view_code_bigquery_query" style="display:none;">[
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;table&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 3, 
                        &quot;description&quot;: &quot;Table to create from this query.&quot;, 
                        &quot;name&quot;: &quot;table&quot;
                    }
                }, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Existing BigQuery dataset.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;text&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;SQL with newlines and all.&quot;, 
                        &quot;name&quot;: &quot;query&quot;
                    }
                }, 
                &quot;legacy&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: true, 
                        &quot;kind&quot;: &quot;boolean&quot;, 
                        &quot;order&quot;: 4, 
                        &quot;description&quot;: &quot;Query type must match source tables.&quot;, 
                        &quot;name&quot;: &quot;legacy&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;service&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">arrow_forward</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_bigquery_view">JSON</span>
            <h4>Query To View</h4>
            <p>TASK: bigquery_view</p>
            <p>Create a BigQuery view.</p>
            <ol>
              <li>Specify a single query and choose legacy or standard mode.</li><li>For PLX use: SELECT * FROM [plx.google:FULL_TABLE_NAME.all] WHERE...</li><li>If the view exists, it is unchanged, delete it manually to re-create.</li>
            </ol>
            <pre class="view_code" id="view_code_bigquery_view" style="display:none;">[
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Existing BigQuery dataset.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }, 
                &quot;view&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 3, 
                        &quot;description&quot;: &quot;View to create from this query.&quot;, 
                        &quot;name&quot;: &quot;view&quot;
                    }
                }
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;text&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;SQL with newlines and all.&quot;, 
                        &quot;name&quot;: &quot;query&quot;
                    }
                }, 
                &quot;legacy&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: true, 
                        &quot;kind&quot;: &quot;boolean&quot;, 
                        &quot;order&quot;: 4, 
                        &quot;description&quot;: &quot;Query type must match source tables.&quot;, 
                        &quot;name&quot;: &quot;legacy&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">arrow_forward</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_bigquery_run_query">JSON</span>
            <h4>Run Query</h4>
            <p>TASK: bigquery_run_query</p>
            <p>Run query on a project.</p>
            <ol>
              <li>Specify a single query and choose legacy or standard mode.</li><li>For PLX use: SELECT * FROM [plx.google:FULL_TABLE_NAME.all] WHERE...</li><li>For non legacy use: SELECT * `project.datset.table` WHERE...</li>
            </ol>
            <pre class="view_code" id="view_code_bigquery_run_query" style="display:none;">[
    {
        &quot;bigquery&quot;: {
            &quot;run&quot;: {
                &quot;query&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;text&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;SQL with newlines and all.&quot;, 
                        &quot;name&quot;: &quot;query&quot;
                    }
                }, 
                &quot;legacy&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: true, 
                        &quot;kind&quot;: &quot;boolean&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Query type must match table and query format.&quot;, 
                        &quot;name&quot;: &quot;legacy&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">arrow_forward</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_bigquery_storage">JSON</span>
            <h4>Storage To Table</h4>
            <p>TASK: bigquery_storage</p>
            <p>Move using bucket and path prefix.</p>
            <ol>
              <li>Specify a bucket and path prefix, * suffix is NOT required.</li><li>Every time the job runs it will overwrite the table.</li>
            </ol>
            <pre class="view_code" id="view_code_bigquery_storage" style="display:none;">[
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;table&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 4, 
                        &quot;description&quot;: &quot;Table to create from this query.&quot;, 
                        &quot;name&quot;: &quot;table&quot;
                    }
                }, 
                &quot;auth&quot;: &quot;service&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 3, 
                        &quot;description&quot;: &quot;Existing BigQuery dataset.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;from&quot;: {
                &quot;path&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Path prefix to read from, no * required.&quot;, 
                        &quot;name&quot;: &quot;path&quot;
                    }
                }, 
                &quot;bucket&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;Google cloud bucket.&quot;, 
                        &quot;name&quot;: &quot;bucket&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;schema&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;[]&quot;, 
                    &quot;kind&quot;: &quot;json&quot;, 
                    &quot;order&quot;: 5, 
                    &quot;description&quot;: &quot;Schema provided in JSON list format or empty list.&quot;, 
                    &quot;name&quot;: &quot;schema&quot;
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
      </tbody>
    </table>
  
    <table class="view_product bordered highlight list" id="view_product_2" style="display:none;">
      <thead>
        <tr>
          <th class="center" style="width:90px;"></th>
          <th>DBM</th>
        </tr>
      </thead>
      <tbody>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_large</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dbm">JSON</span>
            <h4>DBM Report</h4>
            <p>TASK: dbm</p>
            <p>Create a DBM report.</p>
            <ol>
              <li>Reference field values from the <a href='https://developers.google.com/bid-manager/v1/reports'>DBM API</a> to build a report.</li><li>Copy and paste the JSON definition of a report.</li><li>The report is only created, use a move script to move it.</li><li>To reset a report, delete it from DBM reporting.</li>
            </ol>
            <pre class="view_code" id="view_code_dbm" style="display:none;">[
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;body&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;{}&quot;, 
                        &quot;kind&quot;: &quot;json&quot;, 
                        &quot;name&quot;: &quot;body&quot;, 
                        &quot;order&quot;: 1
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;delete&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: false, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;name&quot;: &quot;delete&quot;, 
                    &quot;order&quot;: 3
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_large</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dbm_to_bigquery">JSON</span>
            <h4>DBM To BigQuery</h4>
            <p>TASK: dbm_to_bigquery</p>
            <p>Move existing DBM reports into a BigQuery table.</p>
            <ol>
              <li>Specify either report name or report id to move a report.</li><li>A schema is recommended, if not provided it will be guessed.</li><li>The most recent valid file will be moved to the table.</li>
            </ol>
            <pre class="view_code" id="view_code_dbm_to_bigquery" style="display:none;">[
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Name of report, not needed if ID used.&quot;, 
                        &quot;name&quot;: &quot;dbm_report_name&quot;
                    }
                }, 
                &quot;report_id&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;DBM report ID given in UI, not needed if name used.&quot;, 
                        &quot;name&quot;: &quot;dbm_report_id&quot;
                    }
                }
            }, 
            &quot;datastudio&quot;: true, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 3, 
                            &quot;description&quot;: &quot;Existing BigQuery dataset.&quot;, 
                            &quot;name&quot;: &quot;dbm_dataset&quot;
                        }
                    }, 
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 4, 
                            &quot;description&quot;: &quot;Table to create from this report.&quot;, 
                            &quot;name&quot;: &quot;dbm_table&quot;
                        }
                    }, 
                    &quot;is_incremental_load&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: false, 
                            &quot;kind&quot;: &quot;boolean&quot;, 
                            &quot;order&quot;: 6, 
                            &quot;description&quot;: &quot;Clear data in destination table during this report&#39;s time period, then append report data to destination table.&quot;, 
                            &quot;name&quot;: &quot;is_incremental_load&quot;
                        }
                    }, 
                    &quot;schema&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;[]&quot;, 
                            &quot;kind&quot;: &quot;json&quot;, 
                            &quot;order&quot;: 5, 
                            &quot;description&quot;: &quot;Schema provided in JSON list format or empty list.&quot;, 
                            &quot;name&quot;: &quot;dbm_schema&quot;
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_large</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dbm_to_sheets">JSON</span>
            <h4>DBM To Sheets</h4>
            <p>TASK: dbm_to_sheets</p>
            <p>Move existing DBM report into a Sheets tab.</p>
            <ol>
              <li>Specify either report name or report id to move a report.</li><li>The most recent valid file will be moved to the sheet.</li>
            </ol>
            <pre class="view_code" id="view_code_dbm_to_sheets" style="display:none;">[
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Name of report, not needed if ID used.&quot;, 
                        &quot;name&quot;: &quot;report_name&quot;
                    }
                }, 
                &quot;report_id&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;DBM report ID given in UI, not needed if name used.&quot;, 
                        &quot;name&quot;: &quot;report_id&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;sheets&quot;: {
                    &quot;range&quot;: &quot;A1&quot;, 
                    &quot;sheet&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 3, 
                            &quot;description&quot;: &quot;Full URL to sheet being written to.&quot;, 
                            &quot;name&quot;: &quot;sheet&quot;
                        }
                    }, 
                    &quot;tab&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 4, 
                            &quot;description&quot;: &quot;Existing tab in sheet to write to.&quot;, 
                            &quot;name&quot;: &quot;tab&quot;
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_large</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dbm_to_storage">JSON</span>
            <h4>DBM To Storage</h4>
            <p>TASK: dbm_to_storage</p>
            <p>Move existing DBM report into a Storage bucket.</p>
            <ol>
              <li>Specify either report name or report id to move a report.</li><li>The most recent valid file will be moved to the bucket.</li>
            </ol>
            <pre class="view_code" id="view_code_dbm_to_storage" style="display:none;">[
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Name of report, not needed if ID used.&quot;, 
                        &quot;name&quot;: &quot;dbm_report_name&quot;
                    }
                }, 
                &quot;report_id&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;DBM report ID given in UI, not needed if name used.&quot;, 
                        &quot;name&quot;: &quot;dbm_report_id&quot;
                    }
                }
            }, 
            &quot;datastudio&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: true, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;order&quot;: 5, 
                    &quot;description&quot;: &quot;Format date and column nulls for DataStudio?&quot;, 
                    &quot;name&quot;: &quot;dbm_datastudio&quot;
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;storage&quot;: {
                    &quot;path&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 4, 
                            &quot;description&quot;: &quot;Path and filename to write to.&quot;, 
                            &quot;name&quot;: &quot;dbm_path&quot;
                        }
                    }, 
                    &quot;bucket&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 3, 
                            &quot;description&quot;: &quot;Google cloud bucket.&quot;, 
                            &quot;name&quot;: &quot;dbm_bucket&quot;
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">storage</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_entity">JSON</span>
            <h4>Entity Read Files</h4>
            <p>TASK: entity</p>
            <p>Import public and private &lt;a href=&#39;https://developers.google.com/bid-manager/guides/entity-read/format-v2&#39; target=&#39;_blank&#39;&gt;Entity Read Files&lt;/a&gt; into a BigQuery dataset.&lt;br/&gt;CAUTION: PARTNER ONLY, ADVERTISER FILTER IS NOT APPLIED.</p>
            <ol>
              <li>Entity Read Files ONLY work at the partner level.</li><li>Advertiser filter is NOT APPLIED.</li><li>Specify one or more partners to be moved into the dataset.</li>
            </ol>
            <pre class="view_code" id="view_code_entity" style="display:none;">[
    {
        &quot;dataset&quot;: {
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;dataset&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 3, 
                    &quot;description&quot;: &quot;BigQuery dataset to write tables for each entity.&quot;, 
                    &quot;name&quot;: &quot;dataset&quot;
                }
            }
        }
    }, 
    {
        &quot;entity&quot;: {
            &quot;entities&quot;: [
                &quot;Campaign&quot;, 
                &quot;LineItem&quot;, 
                &quot;Creative&quot;, 
                &quot;UserList&quot;, 
                &quot;Partner&quot;, 
                &quot;Advertiser&quot;, 
                &quot;InsertionOrder&quot;, 
                &quot;Pixel&quot;, 
                &quot;InventorySource&quot;, 
                &quot;CustomAffinity&quot;, 
                &quot;UniversalChannel&quot;, 
                &quot;UniversalSite&quot;, 
                &quot;SupportedExchange&quot;, 
                &quot;DataPartner&quot;, 
                &quot;GeoLocation&quot;, 
                &quot;Language&quot;, 
                &quot;DeviceCriteria&quot;, 
                &quot;Browser&quot;, 
                &quot;Isp&quot;
            ], 
            &quot;prefix&quot;: &quot;Entity&quot;, 
            &quot;partners&quot;: {
                &quot;single_cell&quot;: true, 
                &quot;values&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;[]&quot;, 
                        &quot;kind&quot;: &quot;integer_list&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;Comma sparated list of DBM partners.&quot;, 
                        &quot;name&quot;: &quot;partners&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;auth&quot;: &quot;service&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 3, 
                            &quot;description&quot;: &quot;BigQuery dataset to write tables for each entity.&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">arrow_upward</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_lineitem_write_from_bigquery">JSON</span>
            <h4>Line Item From BigQuery</h4>
            <p>TASK: lineitem_write_from_bigquery</p>
            <p>Upload Line Items From BigQuery To DBM.</p>
            <ol>
              <li>Specify the table or view where the lineitem data is defined.</li><li>The schema should match <a href='https://developers.google.com/bid-manager/guides/entity-write/format' target='_blank'>Entity Write Format</a>.</li>
            </ol>
            <pre class="view_code" id="view_code_lineitem_write_from_bigquery" style="display:none;">[
    {
        &quot;lineitem&quot;: {
            &quot;write&quot;: {
                &quot;dry_run&quot;: false, 
                &quot;bigquery&quot;: {
                    &quot;query&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;SELECT * FROM `Dataset.Table`;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;query&quot;, 
                            &quot;order&quot;: 2
                        }
                    }, 
                    &quot;legacy&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: false, 
                            &quot;kind&quot;: &quot;boolean&quot;, 
                            &quot;name&quot;: &quot;legacy&quot;, 
                            &quot;order&quot;: 3
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;order&quot;: 1
                        }
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">arrow_downward</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_lineitem_read_to_bigquery_via_query">JSON</span>
            <h4>Line Item To BigQuery Via Query</h4>
            <p>TASK: lineitem_read_to_bigquery_via_query</p>
            <p>Move using an Id query.</p>
            <ol>
              <li>Specify the query that will pull the lineitem ids to download.</li><li>Specify the dataset and table where the lineitems will be written.</li><li>The schema will match <a href='https://developers.google.com/bid-manager/guides/entity-write/format' target='_blank'>Entity Write Format</a>.</li>
            </ol>
            <pre class="view_code" id="view_code_lineitem_read_to_bigquery_via_query" style="display:none;">[
    {
        &quot;lineitem&quot;: {
            &quot;read&quot;: {
                &quot;line_items&quot;: {
                    &quot;single_cell&quot;: true, 
                    &quot;bigquery&quot;: {
                        &quot;query&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;SELECT * FROM `Dataset.Table`;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;id_query&quot;, 
                                &quot;order&quot;: 2
                            }
                        }, 
                        &quot;legacy&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: false, 
                                &quot;kind&quot;: &quot;boolean&quot;, 
                                &quot;name&quot;: &quot;id_legacy&quot;, 
                                &quot;order&quot;: 3
                            }
                        }, 
                        &quot;dataset&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;id_dataset&quot;, 
                                &quot;order&quot;: 1
                            }
                        }
                    }
                }, 
                &quot;out&quot;: {
                    &quot;bigquery&quot;: {
                        &quot;table&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;destination_table&quot;, 
                                &quot;order&quot;: 5
                            }
                        }, 
                        &quot;dataset&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;destination_dataset&quot;, 
                                &quot;order&quot;: 4
                            }
                        }
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">arrow_downward</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_lineitem_read_to_bigquery_via_value">JSON</span>
            <h4>Line Item To BigQuery Via Values</h4>
            <p>TASK: lineitem_read_to_bigquery_via_value</p>
            <p>Move using hard coded Id values.</p>
            <ol>
              <li>Provide a comma delimited list of line item ids.</li><li>Specify the dataset and table where the lineitems will be written.</li><li>The schema will match <a href='https://developers.google.com/bid-manager/guides/entity-write/format' target='_blank'>Entity Write Format</a>.</li>
            </ol>
            <pre class="view_code" id="view_code_lineitem_read_to_bigquery_via_value" style="display:none;">[
    {
        &quot;lineitem&quot;: {
            &quot;read&quot;: {
                &quot;line_items&quot;: {
                    &quot;single_cell&quot;: true, 
                    &quot;values&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: [], 
                            &quot;kind&quot;: &quot;integer_list&quot;, 
                            &quot;name&quot;: &quot;ids&quot;, 
                            &quot;order&quot;: 1
                        }
                    }
                }, 
                &quot;out&quot;: {
                    &quot;bigquery&quot;: {
                        &quot;table&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;destination_table&quot;, 
                                &quot;order&quot;: 3
                            }
                        }, 
                        &quot;dataset&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;destination_dataset&quot;, 
                                &quot;order&quot;: 2
                            }
                        }
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_large</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_sdf_to_bigquery">JSON</span>
            <h4>SDF Download</h4>
            <p>TASK: sdf_to_bigquery</p>
            <p>Download SDF reports into a BigQuery table.</p>
            <ol>
              <li>Select your filter types and the filter ideas.</li><li>Select the file types you want from the sdf.</li><li>The job will grab the entire sdf and upload to your table.</li><li>The job will append an underscore and the file type to the provided table name for the result table.</li>
            </ol>
            <pre class="view_code" id="view_code_sdf_to_bigquery" style="display:none;">[
    {
        &quot;sdf&quot;: {
            &quot;read&quot;: {
                &quot;filter_ids&quot;: {
                    &quot;single_cell&quot;: true, 
                    &quot;values&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;integer_list&quot;, 
                            &quot;order&quot;: 3, 
                            &quot;description&quot;: &quot;The filter ids for the request.&quot;, 
                            &quot;name&quot;: &quot;filter_ids&quot;
                        }
                    }
                }
            }, 
            &quot;file_types&quot;: {
                &quot;field&quot;: {
                    &quot;kind&quot;: &quot;string_list&quot;, 
                    &quot;description&quot;: &quot;The sdf file types to be returned.&quot;, 
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;choices&quot;: [
                        &quot;AD&quot;, 
                        &quot;AD_GROUP&quot;, 
                        &quot;CAMPAIGN&quot;, 
                        &quot;INSERTION_ORDER&quot;, 
                        &quot;INVENTORY_SOURCE&quot;, 
                        &quot;LINE_ITEM&quot;
                    ], 
                    &quot;order&quot;: 1, 
                    &quot;name&quot;: &quot;file_types&quot;
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;filter_type&quot;: {
                &quot;field&quot;: {
                    &quot;kind&quot;: &quot;choice&quot;, 
                    &quot;description&quot;: &quot;The filter type for the filter ids.&quot;, 
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;choices&quot;: [
                        &quot;ADVERTISER_ID&quot;, 
                        &quot;CAMPAIGN_ID&quot;, 
                        &quot;INSERTION_ORDER_ID&quot;, 
                        &quot;INVENTORY_SOURCE_ID&quot;, 
                        &quot;LINE_ITEM_ID&quot;, 
                        &quot;PARTNER_ID&quot;
                    ], 
                    &quot;order&quot;: 2, 
                    &quot;name&quot;: &quot;filter_type&quot;
                }
            }, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 5, 
                            &quot;description&quot;: &quot;Table to be written to in BigQuery.&quot;, 
                            &quot;name&quot;: &quot;table&quot;
                        }
                    }, 
                    &quot;is_time_partition&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: false, 
                            &quot;kind&quot;: &quot;boolean&quot;, 
                            &quot;order&quot;: 6, 
                            &quot;description&quot;: &quot;Whether the end table is time partitioned.&quot;, 
                            &quot;name&quot;: &quot;is_time_partition&quot;
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 4, 
                            &quot;description&quot;: &quot;Dataset to be written to in BigQuery.&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
      </tbody>
    </table>
  
    <table class="view_product bordered highlight list" id="view_product_3" style="display:none;">
      <thead>
        <tr>
          <th class="center" style="width:90px;"></th>
          <th>DCM</th>
        </tr>
      </thead>
      <tbody>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">file_upload</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_conversion_upload_from_biguery">JSON</span>
            <h4>Conversion Upload BigQuery</h4>
            <p>TASK: conversion_upload_from_biguery</p>
            <p>Move from BigQuery to DCM.</p>
            <ol>
              <li>Specify a DCM Account ID, Floodligh Activity ID and Conversion Type.</li><li>Include BigQuery dataset and table.</li><li>Columns: Ordinal, timestampMicros, encryptedUserId | encryptedUserIdCandidates | gclid | mobileDeviceId</li><li>Include encryption information if using encryptedUserId or encryptedUserIdCandidates.</li>
            </ol>
            <pre class="view_code" id="view_code_conversion_upload_from_biguery" style="display:none;">[
    {
        &quot;conversion_upload&quot;: {
            &quot;activity_id&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;integer&quot;, 
                    &quot;name&quot;: &quot;floodlight_activity_id&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;account_id&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;account&quot;, 
                    &quot;order&quot;: 0
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;conversion_type&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;encryptedUserId&quot;, 
                    &quot;kind&quot;: &quot;choice&quot;, 
                    &quot;order&quot;: 2, 
                    &quot;name&quot;: &quot;floodlight_conversion_type&quot;, 
                    &quot;choices&quot;: [
                        &quot;encryptedUserId&quot;, 
                        &quot;encryptedUserIdCandidates&quot;, 
                        &quot;gclid&quot;, 
                        &quot;mobileDeviceId&quot;
                    ]
                }
            }, 
            &quot;bigquery&quot;: {
                &quot;table&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;bigquery_table&quot;, 
                        &quot;order&quot;: 7
                    }
                }, 
                &quot;legacy&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: true, 
                        &quot;kind&quot;: &quot;boolean&quot;, 
                        &quot;name&quot;: &quot;bigquery_legacy&quot;, 
                        &quot;order&quot;: 8
                    }
                }, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;bigquery_dataset&quot;, 
                        &quot;order&quot;: 6
                    }
                }
            }, 
            &quot;encryptionInfo&quot;: {
                &quot;encryptionEntityId&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;name&quot;: &quot;encryption_entity_id&quot;, 
                        &quot;order&quot;: 3
                    }
                }, 
                &quot;encryptionSource&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;DATA_TRANSFER&quot;, 
                        &quot;kind&quot;: &quot;choice&quot;, 
                        &quot;order&quot;: 5, 
                        &quot;name&quot;: &quot;encryption_entity_source&quot;, 
                        &quot;choices&quot;: [
                            &quot;AD_SERVING&quot;, 
                            &quot;DATA_TRANSFER&quot;, 
                            &quot;ENCRYPTION_SCOPE_UNKNOWN&quot;
                        ]
                    }
                }, 
                &quot;encryptionEntityType&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;DCM_ACCOUNT&quot;, 
                        &quot;kind&quot;: &quot;choice&quot;, 
                        &quot;order&quot;: 4, 
                        &quot;name&quot;: &quot;encryption_entity_type&quot;, 
                        &quot;choices&quot;: [
                            &quot;ADWORDS_CUSTOMER&quot;, 
                            &quot;DBM_ADVERTISER&quot;, 
                            &quot;DBM_PARTNER&quot;, 
                            &quot;DCM_ACCOUNT&quot;, 
                            &quot;DCM_ADVERTISER&quot;, 
                            &quot;ENCRYPTION_ENTITY_TYPE_UNKNOWN&quot;
                        ]
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">file_upload</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_conversion_upload_from_sheets">JSON</span>
            <h4>Conversion Upload Sheets</h4>
            <p>TASK: conversion_upload_from_sheets</p>
            <p>Move form Sheets to DCM.</p>
            <ol>
              <li>Specify a DCM Account ID, Floodligh Activity ID and Conversion Type.</li><li>Include Sheets url, tab, and range, omit headers in range.</li><li>Columns: Ordinal, timestampMicros, encryptedUserId | encryptedUserIdCandidates | gclid | mobileDeviceId</li><li>Include encryption information if using encryptedUserId or encryptedUserIdCandidates.</li>
            </ol>
            <pre class="view_code" id="view_code_conversion_upload_from_sheets" style="display:none;">[
    {
        &quot;conversion_upload&quot;: {
            &quot;activity_id&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;integer&quot;, 
                    &quot;name&quot;: &quot;floodlight_activity_id&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;account_id&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;dcm_account&quot;, 
                    &quot;order&quot;: 0
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;conversion_type&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;encryptedUserId&quot;, 
                    &quot;kind&quot;: &quot;choice&quot;, 
                    &quot;order&quot;: 2, 
                    &quot;name&quot;: &quot;floodlight_conversion_type&quot;, 
                    &quot;choices&quot;: [
                        &quot;encryptedUserId&quot;, 
                        &quot;encryptedUserIdCandidates&quot;, 
                        &quot;gclid&quot;, 
                        &quot;mobileDeviceId&quot;
                    ]
                }
            }, 
            &quot;sheets&quot;: {
                &quot;url&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;sheet_url&quot;, 
                        &quot;order&quot;: 9
                    }
                }, 
                &quot;range&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;sheet_range&quot;, 
                        &quot;order&quot;: 11
                    }
                }, 
                &quot;tab&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;sheet_tab&quot;, 
                        &quot;order&quot;: 10
                    }
                }
            }, 
            &quot;encryptionInfo&quot;: {
                &quot;encryptionEntityId&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;name&quot;: &quot;encryption_entity_id&quot;, 
                        &quot;order&quot;: 3
                    }
                }, 
                &quot;encryptionSource&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;DATA_TRANSFER&quot;, 
                        &quot;kind&quot;: &quot;choice&quot;, 
                        &quot;order&quot;: 5, 
                        &quot;name&quot;: &quot;encryption_entity_source&quot;, 
                        &quot;choices&quot;: [
                            &quot;AD_SERVING&quot;, 
                            &quot;DATA_TRANSFER&quot;, 
                            &quot;ENCRYPTION_SCOPE_UNKNOWN&quot;
                        ]
                    }
                }, 
                &quot;encryptionEntityType&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;DCM_ACCOUNT&quot;, 
                        &quot;kind&quot;: &quot;choice&quot;, 
                        &quot;order&quot;: 4, 
                        &quot;name&quot;: &quot;encryption_entity_type&quot;, 
                        &quot;choices&quot;: [
                            &quot;ADWORDS_CUSTOMER&quot;, 
                            &quot;DBM_ADVERTISER&quot;, 
                            &quot;DBM_PARTNER&quot;, 
                            &quot;DCM_ACCOUNT&quot;, 
                            &quot;DCM_ADVERTISER&quot;, 
                            &quot;ENCRYPTION_ENTITY_TYPE_UNKNOWN&quot;
                        ]
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_small</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dcm_api_to_bigquery">JSON</span>
            <h4>DCM API To BigQuery</h4>
            <p>TASK: dcm_api_to_bigquery</p>
            <p>Write the current state of accounts, subaccounts, profiles, advertisers, campaigns, sites, roles, and reports to BigQuery for a given list of DCM accounts.</p>
            <ol>
              <li>Specify the name of the dataset, several tables will be created here.</li><li>If dataset exists, it is inchanged.</li><li>Add DCM account ids for the accounts to pull data from.</li>
            </ol>
            <pre class="view_code" id="view_code_dcm_api_to_bigquery" style="display:none;">[
    {
        &quot;dcm_api&quot;: {
            &quot;endpoints&quot;: [
                &quot;accounts&quot;, 
                &quot;subaccounts&quot;, 
                &quot;profiles&quot;, 
                &quot;advertisers&quot;, 
                &quot;campaigns&quot;, 
                &quot;sites&quot;, 
                &quot;roles&quot;, 
                &quot;reports&quot;
            ], 
            &quot;accounts&quot;: {
                &quot;single_cell&quot;: true, 
                &quot;values&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer_list&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Comma separated DCM account ids.&quot;, 
                        &quot;name&quot;: &quot;cm_accounts&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;auth&quot;: &quot;service&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;Google BigQuery dataset to create tables in.&quot;, 
                        &quot;name&quot;: &quot;dataset_dataset&quot;
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_small</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dcm">JSON</span>
            <h4>DCM Report</h4>
            <p>TASK: dcm</p>
            <p>Create a DCM report from a JSON definition.</p>
            <ol>
              <li>Add a an account as [account_id]@[profile_id]</li><li>Fetch the report JSON definition. Arguably could be better.</li><li>The account is automatically added to the report definition.</li>
            </ol>
            <pre class="view_code" id="view_code_dcm" style="display:none;">[
    {
        &quot;dcm&quot;: {
            &quot;report&quot;: {
                &quot;body&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;{}&quot;, 
                        &quot;kind&quot;: &quot;json&quot;, 
                        &quot;name&quot;: &quot;body&quot;, 
                        &quot;order&quot;: 2
                    }
                }, 
                &quot;account&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;account&quot;, 
                        &quot;order&quot;: 1
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;delete&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: false, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;name&quot;: &quot;delete&quot;, 
                    &quot;order&quot;: 3
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_small</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dcm_bulk_standard">JSON</span>
            <h4>DCM Standard Bulk</h4>
            <p>TASK: dcm_bulk_standard</p>
            <p>Aggregate multiple standard DCM reports into one BigQuery or Sheet.</p>
            <ol>
              <li>See API docs for <a href='https://developers.google.com/doubleclick-advertisers/v3.2/dimensions' target='_blank'>Metrics</a>.</li><li>DCM report name format '[Report Name] [Account ID] ( StarThinker )'.</li><li>Specify either bucket and path or dataset and table.</li><li>Schema is pulled from the official DCM specification.</li>
            </ol>
            <pre class="view_code" id="view_code_dcm_bulk_standard" style="display:none;">[
    {
        &quot;dcm_bulk&quot;: {
            &quot;datastudio&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: true, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;name&quot;: &quot;datastudio&quot;, 
                    &quot;order&quot;: 11
                }
            }, 
            &quot;name&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;name&quot;, 
                    &quot;order&quot;: 2
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;accounts&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;integer_list&quot;, 
                    &quot;name&quot;: &quot;accounts&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;report&quot;: {
                &quot;metrics&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: [
                            &quot;impressions&quot;
                        ], 
                        &quot;kind&quot;: &quot;string_list&quot;, 
                        &quot;name&quot;: &quot;dcm_metrics&quot;, 
                        &quot;order&quot;: 5
                    }
                }, 
                &quot;relativeDateRange&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;LAST_7_DAYS&quot;, 
                        &quot;kind&quot;: &quot;choice&quot;, 
                        &quot;order&quot;: 3, 
                        &quot;name&quot;: &quot;range&quot;, 
                        &quot;choices&quot;: [
                            &quot;LAST_24_MONTHS&quot;, 
                            &quot;LAST_30_DAYS&quot;, 
                            &quot;LAST_365_DAYS&quot;, 
                            &quot;LAST_7_DAYS&quot;, 
                            &quot;LAST_90_DAYS&quot;, 
                            &quot;MONTH_TO_DATE&quot;, 
                            &quot;PREVIOUS_MONTH&quot;, 
                            &quot;PREVIOUS_QUARTER&quot;, 
                            &quot;PREVIOUS_WEEK&quot;, 
                            &quot;PREVIOUS_YEAR&quot;, 
                            &quot;QUARTER_TO_DATE&quot;, 
                            &quot;TODAY&quot;, 
                            &quot;WEEK_TO_DATE&quot;, 
                            &quot;YEAR_TO_DATE&quot;, 
                            &quot;YESTERDAY&quot;
                        ]
                    }
                }, 
                &quot;type&quot;: &quot;STANDARD&quot;, 
                &quot;dimensions&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: [
                            &quot;date&quot;, 
                            &quot;platformType&quot;, 
                            &quot;creativeType&quot;, 
                            &quot;state&quot;, 
                            &quot;dmaRegion&quot;
                        ], 
                        &quot;kind&quot;: &quot;string_list&quot;, 
                        &quot;name&quot;: &quot;dcm_dimensions&quot;, 
                        &quot;order&quot;: 4
                    }
                }, 
                &quot;timeout&quot;: 0
            }, 
            &quot;delete&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: false, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;name&quot;: &quot;delete&quot;, 
                    &quot;order&quot;: 10
                }
            }, 
            &quot;out&quot;: {
                &quot;storage&quot;: {
                    &quot;path&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;DCM_Report&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;path&quot;, 
                            &quot;order&quot;: 8
                        }
                    }, 
                    &quot;bucket&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;bucket&quot;, 
                            &quot;order&quot;: 7
                        }
                    }
                }, 
                &quot;bigquery&quot;: {
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;table&quot;, 
                            &quot;order&quot;: 6
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;order&quot;: 5
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_small</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dcm_to_bigquery">JSON</span>
            <h4>DCM To BigQuery</h4>
            <p>TASK: dcm_to_bigquery</p>
            <p>Move existing DCM report into a BigQuery table.</p>
            <ol>
              <li>Specify an account id.</li><li>Specify either report name or report id to move a report.</li><li>The most recent valid file will overwrite the table.</li><li>Schema is pulled from the official DCM specification.</li>
            </ol>
            <pre class="view_code" id="view_code_dcm_to_bigquery" style="display:none;">[
    {
        &quot;dcm&quot;: {
            &quot;report&quot;: {
                &quot;account&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;DCM network id.&quot;, 
                        &quot;name&quot;: &quot;account&quot;
                    }
                }, 
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 4, 
                        &quot;description&quot;: &quot;DCM report name, empty if using id instead.&quot;, 
                        &quot;name&quot;: &quot;report_name&quot;
                    }
                }, 
                &quot;report_id&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 3, 
                        &quot;description&quot;: &quot;DCM report id, empty if using name .&quot;, 
                        &quot;name&quot;: &quot;report_id&quot;
                    }
                }
            }, 
            &quot;datastudio&quot;: true, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 6, 
                            &quot;description&quot;: &quot;Table to be written to in BigQuery.&quot;, 
                            &quot;name&quot;: &quot;table&quot;
                        }
                    }, 
                    &quot;is_incremental_load&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: false, 
                            &quot;kind&quot;: &quot;boolean&quot;, 
                            &quot;order&quot;: 7, 
                            &quot;description&quot;: &quot;Clear data in destination table during this report&#39;s time period, then append report data to existing table.&quot;, 
                            &quot;name&quot;: &quot;is_incremental_load&quot;
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 5, 
                            &quot;description&quot;: &quot;Dataset to be written to in BigQuery.&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_small</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dcm_to_sheets">JSON</span>
            <h4>DCM To Sheets</h4>
            <p>TASK: dcm_to_sheets</p>
            <p>Move existing DCM report into a Sheet tab.</p>
            <ol>
              <li>Specify an account id.</li><li>Specify either report name or report id to move a report.</li><li>The most recent valid file will be moved to the sheet.</li><li>Schema is pulled from the official DCM specification.</li>
            </ol>
            <pre class="view_code" id="view_code_dcm_to_sheets" style="display:none;">[
    {
        &quot;dcm&quot;: {
            &quot;report&quot;: {
                &quot;account&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;name&quot;: &quot;account&quot;, 
                        &quot;order&quot;: 2
                    }
                }, 
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;report_name&quot;, 
                        &quot;order&quot;: 4
                    }
                }, 
                &quot;report_id&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;name&quot;: &quot;report_id&quot;, 
                        &quot;order&quot;: 3
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;sheets&quot;: {
                    &quot;range&quot;: &quot;A1&quot;, 
                    &quot;sheet&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;sheet&quot;, 
                            &quot;order&quot;: 5
                        }
                    }, 
                    &quot;tab&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;tab&quot;, 
                            &quot;order&quot;: 6
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_small</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dcm_to_storage">JSON</span>
            <h4>DCM To Storage</h4>
            <p>TASK: dcm_to_storage</p>
            <p>Move existing DCM report into a Storage bucket.</p>
            <ol>
              <li>Specify an account id.</li><li>Specify either report name or report id to move a report.</li><li>The most recent file will be moved to the bucket.</li><li>Schema is pulled from the official DCM specification.</li>
            </ol>
            <pre class="view_code" id="view_code_dcm_to_storage" style="display:none;">[
    {
        &quot;dcm&quot;: {
            &quot;report&quot;: {
                &quot;account&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;name&quot;: &quot;account&quot;, 
                        &quot;order&quot;: 2
                    }
                }, 
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;report_name&quot;, 
                        &quot;order&quot;: 4
                    }
                }, 
                &quot;report_id&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;name&quot;: &quot;report_id&quot;, 
                        &quot;order&quot;: 3
                    }
                }
            }, 
            &quot;datastudio&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: true, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;name&quot;: &quot;datastudio&quot;, 
                    &quot;order&quot;: 7
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;storage&quot;: {
                    &quot;path&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;DCM_Report&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;path&quot;, 
                            &quot;order&quot;: 6
                        }
                    }, 
                    &quot;bucket&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;bucket&quot;, 
                            &quot;order&quot;: 5
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">assignment_returned</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dt">JSON</span>
            <h4>DT To Table</h4>
            <p>TASK: dt</p>
            <p>Move data from a DT bucket into a BigQuery table.</p>
            <ol>
              <li>Ensure your user has <a href='https://developers.google.com/doubleclick-advertisers/dtv2/getting-started' target='_blank'>access to the bucket</a>.</li><li>Provide the DT bucket name to read from.</li><li>Provide the path of the files to read.</li>
            </ol>
            <pre class="view_code" id="view_code_dt" style="display:none;">[
    {
        &quot;dt&quot;: {
            &quot;to&quot;: {
                &quot;table&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 4, 
                        &quot;description&quot;: &quot;Table to write DT files to.&quot;, 
                        &quot;name&quot;: &quot;table&quot;
                    }
                }, 
                &quot;auth&quot;: &quot;service&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 3, 
                        &quot;description&quot;: &quot;Existing dataset in BigQuery.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;from&quot;: {
                &quot;path&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;For example: dcm_account[Network ID]_match_table_campaigns_&quot;, 
                        &quot;name&quot;: &quot;path&quot;
                    }
                }, 
                &quot;bucket&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;For example: dcdt_-dcm_account[Network ID]&quot;, 
                        &quot;name&quot;: &quot;bucket&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
      </tbody>
    </table>
  
    <table class="view_product bordered highlight list" id="view_product_4" style="display:none;">
      <thead>
        <tr>
          <th class="center" style="width:90px;"></th>
          <th>Google API</th>
        </tr>
      </thead>
      <tbody>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">settings_input_component</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_google_api_to_bigquery">JSON</span>
            <h4>API To BigQuery</h4>
            <p>TASK: google_api_to_bigquery</p>
            <p>Execute a Google API function and store results to BigQuery.</p>
            <ol>
              <li>Enter an api name and version.</li><li>Specify the function using dot notation and arguments using json.</li><li>If nextPageToken can be in response check iterate.</li><li>Give BigQuery dataset and table where response will be written.</li>
            </ol>
            <pre class="view_code" id="view_code_google_api_to_bigquery" style="display:none;">[
    {
        &quot;google_api&quot;: {
            &quot;function&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;reports.files.list&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 3, 
                    &quot;description&quot;: &quot;Full function dot notation path.&quot;, 
                    &quot;name&quot;: &quot;function&quot;
                }
            }, 
            &quot;api&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;doubleclickbidmanager&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;See developer guide.&quot;, 
                    &quot;name&quot;: &quot;api&quot;
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;version&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;v1&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 2, 
                    &quot;description&quot;: &quot;Must be supported version.&quot;, 
                    &quot;name&quot;: &quot;version&quot;
                }
            }, 
            &quot;kwargs&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: {
                        &quot;profileId&quot;: 2782211, 
                        &quot;reportId&quot;: 132847265, 
                        &quot;accountId&quot;: 7480
                    }, 
                    &quot;kind&quot;: &quot;json&quot;, 
                    &quot;order&quot;: 4, 
                    &quot;description&quot;: &quot;Dictionray object of name value pairs.&quot;, 
                    &quot;name&quot;: &quot;kwargs&quot;
                }
            }, 
            &quot;iterate&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: false, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;order&quot;: 5, 
                    &quot;description&quot;: &quot;Is the result a list?&quot;, 
                    &quot;name&quot;: &quot;iterate&quot;
                }
            }, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 6, 
                            &quot;description&quot;: &quot;Existing dataset in BigQuery.&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }, 
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 7, 
                            &quot;description&quot;: &quot;Table to write API call results to.&quot;, 
                            &quot;name&quot;: &quot;table&quot;
                        }
                    }, 
                    &quot;schema&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: [], 
                            &quot;kind&quot;: &quot;json&quot;, 
                            &quot;order&quot;: 9, 
                            &quot;description&quot;: &quot;Schema provided in JSON list format or empty list.&quot;, 
                            &quot;name&quot;: &quot;schema&quot;
                        }
                    }, 
                    &quot;format&quot;: &quot;JSON&quot;
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">file_download</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_email_to_bigquery">JSON</span>
            <h4>Email Fetch</h4>
            <p>TASK: email_to_bigquery</p>
            <p>Import emailed csv or excel into a BigQuery table.</p>
            <ol>
              <li>The person executing this recipe must be the recipient of the email.</li><li>Schedule a CSV or Excel to be sent to <b>{{ EMAIL_TOKEN }}</b>.</li><li>Give a regular expression to match the email subject, link or attachment.</li><li>The data downloaded will overwrite the table specified.</li>
            </ol>
            <pre class="view_code" id="view_code_email_to_bigquery" style="display:none;">[
    {
        &quot;email&quot;: {
            &quot;in&quot;: {
                &quot;email&quot;: {
                    &quot;to&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 2, 
                            &quot;description&quot;: &quot;Must match to field.&quot;, 
                            &quot;name&quot;: &quot;email_to&quot;
                        }
                    }, 
                    &quot;subject&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 3, 
                            &quot;description&quot;: &quot;Regular expression to match subject.&quot;, 
                            &quot;name&quot;: &quot;subject&quot;
                        }
                    }, 
                    &quot;link&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 4, 
                            &quot;description&quot;: &quot;Regular expression to match email.&quot;, 
                            &quot;name&quot;: &quot;link&quot;
                        }
                    }, 
                    &quot;attachment&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 5, 
                            &quot;description&quot;: &quot;Regular expression to match atttachment.&quot;, 
                            &quot;name&quot;: &quot;attachment&quot;
                        }
                    }, 
                    &quot;from&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 1, 
                            &quot;description&quot;: &quot;Must match from field.&quot;, 
                            &quot;name&quot;: &quot;email_from&quot;
                        }
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 7, 
                            &quot;description&quot;: &quot;Name of table to be written to.&quot;, 
                            &quot;name&quot;: &quot;table&quot;
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 6, 
                            &quot;description&quot;: &quot;Existing dataset in BigQuery.&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">file_download</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_iam">JSON</span>
            <h4>Project IAM</h4>
            <p>TASK: iam</p>
            <p>Sets project permissions for an email.</p>
            <ol>
              <li>Provide a role in the form of projects/[project name]/roles/[role name]</li><li>Enter an email to grant that role to.</li><li>This only grants roles, you must remove them from the project manually.</li>
            </ol>
            <pre class="view_code" id="view_code_iam" style="display:none;">[
    {
        &quot;iam&quot;: {
            &quot;role&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;projects/[project name]/roles/[role name]&quot;, 
                    &quot;name&quot;: &quot;role&quot;
                }
            }, 
            &quot;email&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 2, 
                    &quot;description&quot;: &quot;Email address to grant role to.&quot;, 
                    &quot;name&quot;: &quot;email&quot;
                }
            }, 
            &quot;auth&quot;: &quot;service&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
      </tbody>
    </table>
  
    <table class="view_product bordered highlight list" id="view_product_5" style="display:none;">
      <thead>
        <tr>
          <th class="center" style="width:90px;"></th>
          <th>Sheets</th>
        </tr>
      </thead>
      <tbody>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">view_column</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_sheets_clear">JSON</span>
            <h4>Sheet Clear</h4>
            <p>TASK: sheets_clear</p>
            <p>Clear data from a sheet.</p>
            <ol>
              <li>For the sheet, provide the full edit URL.</li>
            </ol>
            <pre class="view_code" id="view_code_sheets_clear" style="display:none;">[
    {
        &quot;sheets&quot;: {
            &quot;clear&quot;: true, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;sheet&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;sheets_sheet&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;range&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;sheets_range&quot;, 
                    &quot;order&quot;: 3
                }
            }, 
            &quot;tab&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;sheets_tab&quot;, 
                    &quot;order&quot;: 2
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">view_column</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_sheets_copy">JSON</span>
            <h4>Sheet Copy</h4>
            <p>TASK: sheets_copy</p>
            <p>Copy tab from a sheet to a sheet.</p>
            <ol>
              <li>Provide the full edit URL for both sheets.</li><li>Provide the tab name for both sheets.</li><li>The tab will only be copied if it does not already exist.</li>
            </ol>
            <pre class="view_code" id="view_code_sheets_copy" style="display:none;">[
    {
        &quot;sheets&quot;: {
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;sheet&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;to_sheet&quot;, 
                    &quot;order&quot;: 3
                }
            }, 
            &quot;template&quot;: {
                &quot;sheet&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;from_sheet&quot;, 
                        &quot;order&quot;: 1
                    }
                }, 
                &quot;tab&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;from_tab&quot;, 
                        &quot;order&quot;: 2
                    }
                }
            }, 
            &quot;tab&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;to_tab&quot;, 
                    &quot;order&quot;: 4
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">view_column</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_sheets_to_bigquery">JSON</span>
            <h4>Sheet To Table</h4>
            <p>TASK: sheets_to_bigquery</p>
            <p>Import data from a sheet and move it to a BigQuery table.</p>
            <ol>
              <li>For the sheet, provide the full edit URL.</li><li>If the tab does not exist it will be created.</li><li>Empty cells in the range will be NULL.</li><li>Check Sheets header if first row is a header</li>
            </ol>
            <pre class="view_code" id="view_code_sheets_to_bigquery" style="display:none;">[
    {
        &quot;sheets&quot;: {
            &quot;sheet&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;sheets_url&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;header&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: true, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;name&quot;: &quot;sheets_header&quot;, 
                    &quot;order&quot;: 9
                }
            }, 
            &quot;range&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;sheets_range&quot;, 
                    &quot;order&quot;: 3
                }
            }, 
            &quot;tab&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;sheets_tab&quot;, 
                    &quot;order&quot;: 2
                }
            }, 
            &quot;out&quot;: {
                &quot;auth&quot;: &quot;service&quot;, 
                &quot;bigquery&quot;: {
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;table&quot;, 
                            &quot;order&quot;: 8
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;order&quot;: 7
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
      </tbody>
    </table>
  
    <table class="view_product bordered highlight list" id="view_product_6" style="display:none;">
      <thead>
        <tr>
          <th class="center" style="width:90px;"></th>
          <th>Storage</th>
        </tr>
      </thead>
      <tbody>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">archive</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_archive">JSON</span>
            <h4>Archive</h4>
            <p>TASK: archive</p>
            <p>Wipe old information from a Storage bucket.</p>
            <ol>
              <li>Specify how many days back to retain data and which buckets and paths to purge.</li><li>Everything under a path will be moved to archive or deleted depending on your choice.</li>
            </ol>
            <pre class="view_code" id="view_code_archive" style="display:none;">[
    {
        &quot;archive&quot;: {
            &quot;storage&quot;: {
                &quot;path&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;archive_path&quot;, 
                        &quot;order&quot;: 3
                    }
                }, 
                &quot;bucket&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;archive_bucket&quot;, 
                        &quot;order&quot;: 2
                    }
                }
            }, 
            &quot;days&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: 7, 
                    &quot;kind&quot;: &quot;integer&quot;, 
                    &quot;name&quot;: &quot;archive_days&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;delete&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: false, 
                    &quot;kind&quot;: &quot;boolean&quot;, 
                    &quot;name&quot;: &quot;archive_delete&quot;, 
                    &quot;order&quot;: 4
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">storage</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_bucket">JSON</span>
            <h4>Bucket</h4>
            <p>TASK: bucket</p>
            <p>Create and permission a bucket in Storage.</p>
            <ol>
              <li>Specify the name of the bucket and who will have owner permissions.</li><li>Existing buckets are preserved.</li><li>Adding a permission to the list will update the permissions but removing them will not.</li><li>You have to manualy remove grants.</li>
            </ol>
            <pre class="view_code" id="view_code_bucket" style="display:none;">[
    {
        &quot;bucket&quot;: {
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;bucket&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 2, 
                    &quot;description&quot;: &quot;Name of Google Cloud Bucket to create.&quot;, 
                    &quot;name&quot;: &quot;bucket_bucket&quot;
                }
            }, 
            &quot;emails&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string_list&quot;, 
                    &quot;order&quot;: 3, 
                    &quot;description&quot;: &quot;Comma separated emails.&quot;, 
                    &quot;name&quot;: &quot;bucket_emails&quot;
                }
            }, 
            &quot;groups&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string_list&quot;, 
                    &quot;order&quot;: 4, 
                    &quot;description&quot;: &quot;Comma separated groups.&quot;, 
                    &quot;name&quot;: &quot;bucket_groups&quot;
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
      </tbody>
    </table>
  
    <table class="view_product bordered highlight list" id="view_product_7" style="display:none;">
      <thead>
        <tr>
          <th class="center" style="width:90px;"></th>
          <th>Twitter</th>
        </tr>
      </thead>
      <tbody>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">perm_phone_msg</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_trends_places_to_bigquery_via_query">JSON</span>
            <h4>Trends Places To BigQuery Via Query</h4>
            <p>TASK: trends_places_to_bigquery_via_query</p>
            <p>Move using a WOEID query.</p>
            <ol>
              <li>Provide <a href='https://apps.twitter.com/' target='_blank'>Twitter credentials</a>.</li><li>Provide BigQuery WOEID source query.</li><li>Specify BigQuery dataset and table to write API call results to.</li><li>Writes: WOEID, Name, Url, Promoted_Content, Query, Tweet_Volume</li><li>Note Twitter API is rate limited to 15 requests per 15 minutes. So keep WOEID lists short.</li>
            </ol>
            <pre class="view_code" id="view_code_trends_places_to_bigquery_via_query" style="display:none;">[
    {
        &quot;twitter&quot;: {
            &quot;secret&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;secret&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;trends&quot;: {
                &quot;places&quot;: {
                    &quot;single_cell&quot;: true, 
                    &quot;bigquery&quot;: {
                        &quot;query&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;places_query&quot;, 
                                &quot;order&quot;: 4
                            }
                        }, 
                        &quot;legacy&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: false, 
                                &quot;kind&quot;: &quot;boolean&quot;, 
                                &quot;name&quot;: &quot;places_legacy&quot;, 
                                &quot;order&quot;: 5
                            }
                        }, 
                        &quot;dataset&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;places_dataset&quot;, 
                                &quot;order&quot;: 3
                            }
                        }
                    }
                }
            }, 
            &quot;key&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;key&quot;, 
                    &quot;order&quot;: 2
                }
            }, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;destination_table&quot;, 
                            &quot;order&quot;: 7
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;destination_dataset&quot;, 
                            &quot;order&quot;: 6
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">perm_phone_msg</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_trends_places_to_bigquery_via_value">JSON</span>
            <h4>Trends Places To BigQuery Via Values</h4>
            <p>TASK: trends_places_to_bigquery_via_value</p>
            <p>Move using hard coded WOEID values.</p>
            <ol>
              <li>Provide <a href='https://apps.twitter.com/' target='_blank'>Twitter credentials</a>.</li><li>Provide a comma delimited list of WOEIDs.</li><li>Specify BigQuery dataset and table to write API call results to.</li><li>Writes: WOEID, Name, Url, Promoted_Content, Query, Tweet_Volume</li><li>Note Twitter API is rate limited to 15 requests per 15 minutes. So keep WOEID lists short.</li>
            </ol>
            <pre class="view_code" id="view_code_trends_places_to_bigquery_via_value" style="display:none;">[
    {
        &quot;twitter&quot;: {
            &quot;secret&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;secret&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;trends&quot;: {
                &quot;places&quot;: {
                    &quot;single_cell&quot;: true, 
                    &quot;values&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: [], 
                            &quot;kind&quot;: &quot;integer_list&quot;, 
                            &quot;name&quot;: &quot;woeids&quot;, 
                            &quot;order&quot;: 3
                        }
                    }
                }
            }, 
            &quot;key&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;key&quot;, 
                    &quot;order&quot;: 2
                }
            }, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;destination_table&quot;, 
                            &quot;order&quot;: 7
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;destination_dataset&quot;, 
                            &quot;order&quot;: 6
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">perm_phone_msg</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_trends_places_to_sheets_via_query">JSON</span>
            <h4>Trends Places To Sheets Via Query</h4>
            <p>TASK: trends_places_to_sheets_via_query</p>
            <p>Move using a WOEID query.</p>
            <ol>
              <li>Provide <a href='https://apps.twitter.com/' target='_blank'>Twitter credentials</a>.</li><li>Provide BigQuery WOEID source query.</li><li>Specify Sheet url and tab to write API call results to.</li><li>Writes: WOEID, Name, Url, Promoted_Content, Query, Tweet_Volume</li><li>Note Twitter API is rate limited to 15 requests per 15 minutes. So keep WOEID lists short.</li>
            </ol>
            <pre class="view_code" id="view_code_trends_places_to_sheets_via_query" style="display:none;">[
    {
        &quot;twitter&quot;: {
            &quot;secret&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;secret&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;trends&quot;: {
                &quot;places&quot;: {
                    &quot;single_cell&quot;: true, 
                    &quot;bigquery&quot;: {
                        &quot;query&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;places_query&quot;, 
                                &quot;order&quot;: 4
                            }
                        }, 
                        &quot;legacy&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: false, 
                                &quot;kind&quot;: &quot;boolean&quot;, 
                                &quot;name&quot;: &quot;places_legacy&quot;, 
                                &quot;order&quot;: 5
                            }
                        }, 
                        &quot;dataset&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;places_dataset&quot;, 
                                &quot;order&quot;: 3
                            }
                        }
                    }
                }
            }, 
            &quot;key&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;key&quot;, 
                    &quot;order&quot;: 2
                }
            }, 
            &quot;out&quot;: {
                &quot;sheets&quot;: {
                    &quot;range&quot;: &quot;A1&quot;, 
                    &quot;sheet&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;destination_sheet&quot;, 
                            &quot;order&quot;: 6
                        }
                    }, 
                    &quot;tab&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;destination_tab&quot;, 
                            &quot;order&quot;: 7
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">perm_phone_msg</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_trends_places_to_sheets_via_value">JSON</span>
            <h4>Trends Places To Sheets Via Values</h4>
            <p>TASK: trends_places_to_sheets_via_value</p>
            <p>Move using hard coded WOEID values.</p>
            <ol>
              <li>Provide <a href='https://apps.twitter.com/' target='_blank'>Twitter credentials</a>.</li><li>Provide a comma delimited list of WOEIDs.</li><li>Specify Sheet url and tab to write API call results to.</li><li>Writes: WOEID, Name, Url, Promoted_Content, Query, Tweet_Volume</li><li>Note Twitter API is rate limited to 15 requests per 15 minutes. So keep WOEID lists short.</li>
            </ol>
            <pre class="view_code" id="view_code_trends_places_to_sheets_via_value" style="display:none;">[
    {
        &quot;twitter&quot;: {
            &quot;secret&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;secret&quot;, 
                    &quot;order&quot;: 1
                }
            }, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;trends&quot;: {
                &quot;places&quot;: {
                    &quot;single_cell&quot;: true, 
                    &quot;bigquery&quot;: {
                        &quot;query&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;places_query&quot;, 
                                &quot;order&quot;: 4
                            }
                        }, 
                        &quot;legacy&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: false, 
                                &quot;kind&quot;: &quot;boolean&quot;, 
                                &quot;name&quot;: &quot;places_legacy&quot;, 
                                &quot;order&quot;: 5
                            }
                        }, 
                        &quot;dataset&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;places_dataset&quot;, 
                                &quot;order&quot;: 3
                            }
                        }
                    }
                }
            }, 
            &quot;key&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;key&quot;, 
                    &quot;order&quot;: 2
                }
            }, 
            &quot;out&quot;: {
                &quot;sheets&quot;: {
                    &quot;range&quot;: &quot;A1&quot;, 
                    &quot;sheet&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;destination_sheet&quot;, 
                            &quot;order&quot;: 6
                        }
                    }, 
                    &quot;tab&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;destination_tab&quot;, 
                            &quot;order&quot;: 7
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
      </tbody>
    </table>
  
    <table class="view_product bordered highlight list" id="view_product_8" style="display:none;">
      <thead>
        <tr>
          <th class="center" style="width:90px;"></th>
          <th>gTech</th>
        </tr>
      </thead>
      <tbody>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">waves</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_anonymize">JSON</span>
            <h4>Anonymize Dataset</h4>
            <p>TASK: anonymize</p>
            <p>Copies tables and view from one dataset to another and anynonamizes all rows.  Used to create sample datasets for dashboards.</p>
            <ol>
              <li>Ensure you have user access to both datasets.</li><li>Provide the source project and dataset.</li><li>Provide the destination project and dataset.</li>
            </ol>
            <pre class="view_code" id="view_code_anonymize" style="display:none;">[
    {
        &quot;anonymize&quot;: {
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;bigquery&quot;: {
                &quot;to&quot;: {
                    &quot;project&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 3, 
                            &quot;description&quot;: &quot;Anonymous data will be writen to.&quot;, 
                            &quot;name&quot;: &quot;to_project&quot;
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 4, 
                            &quot;description&quot;: &quot;Anonymous data will be writen to.&quot;, 
                            &quot;name&quot;: &quot;to_dataset&quot;
                        }
                    }
                }, 
                &quot;from&quot;: {
                    &quot;project&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 1, 
                            &quot;description&quot;: &quot;Original project to copy from.&quot;, 
                            &quot;name&quot;: &quot;from_project&quot;
                        }
                    }, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 2, 
                            &quot;description&quot;: &quot;Original dataset to copy from.&quot;, 
                            &quot;name&quot;: &quot;from_dataset&quot;
                        }
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">device_hub</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_audience_mapper">JSON</span>
            <h4>Audience Mapper</h4>
            <p>TASK: audience_mapper</p>
            <p>Create custom audience mappings based on keywords.</p>
            <ol>
              <li>Wait for <b>BigQuery->StarThinker Data->{{DATASET}}->Audience_Mapper_Dashboard</b> to be created.</li><li>Copy <a href='https://datastudio.google.com/open/1QrWNTurvQT6nx20vnzdDveSzSmRjqHxQ' target='_blank'>Audinece Mapper Sample Data</a>.</li><li>Change data source to <b>BigQuery->StarThinker Data->{{DATASET}}->Deal_Finder_Dashboard</b>.</li><li>Copy <a href='https://datastudio.google.com/open/1fjRI5AIKTYTA4fWs-pYkJbIMgCumlMyO' target='_blank'>Audience Mapper Sample Report</a>.</li><li>When prompted choose the new data source you just created.</li><li>Create new dimensions in the sheet.</li><li>Synch the DataStudio data source to pick up the new dimension.</li><li>Create a DataStudio filter for each new dimension.</li><li>Or give these intructions to the client.</li>
            </ol>
            <pre class="view_code" id="view_code_audience_mapper" style="display:none;">[
    {
        &quot;dataset&quot;: {
            &quot;hour&quot;: [
                4
            ], 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;dataset&quot;: {
                &quot;field&quot;: {
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;, 
                    &quot;name&quot;: &quot;dataset&quot;
                }
            }
        }
    }, 
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;partners&quot;: {
                    &quot;values&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;integer_list&quot;, 
                            &quot;order&quot;: 3, 
                            &quot;description&quot;: &quot;Comma separated DBM partner ids.&quot;, 
                            &quot;name&quot;: &quot;partners&quot;
                        }
                    }
                }, 
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;order&quot;: 2, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;prefix&quot;: &quot;Audience_Mapper_&quot;, 
                        &quot;description&quot;: &quot;Name of report in DBM, should be unique.&quot;, 
                        &quot;name&quot;: &quot;recipe_name&quot;
                    }
                }, 
                &quot;data_range&quot;: &quot;LAST_7_DAYS&quot;, 
                &quot;metrics&quot;: [
                    &quot;METRIC_IMPRESSIONS&quot;, 
                    &quot;METRIC_CLICKS&quot;, 
                    &quot;METRIC_TOTAL_CONVERSIONS&quot;, 
                    &quot;METRIC_LAST_IMPRESSIONS&quot;, 
                    &quot;METRIC_LAST_CLICKS&quot;, 
                    &quot;METRIC_REVENUE_ADVERTISER&quot;, 
                    &quot;METRIC_MEDIA_COST_ADVERTISER&quot;
                ], 
                &quot;timezone&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;timezone&quot;, 
                        &quot;name&quot;: &quot;recipe_timezone&quot;, 
                        &quot;description&quot;: &quot;Timezone in &#39;America/Los_Angeles&#39; format.&quot;
                    }
                }, 
                &quot;advertisers&quot;: {
                    &quot;values&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;integer_list&quot;, 
                            &quot;order&quot;: 4, 
                            &quot;description&quot;: &quot;Comma separated DBM advertiser ids.&quot;, 
                            &quot;name&quot;: &quot;advertisers&quot;
                        }
                    }
                }, 
                &quot;type&quot;: &quot;TYPE_CROSS_PARTNER&quot;, 
                &quot;dimensions&quot;: [
                    &quot;FILTER_PARTNER&quot;, 
                    &quot;FILTER_ADVERTISER&quot;, 
                    &quot;FILTER_ADVERTISER_CURRENCY&quot;, 
                    &quot;FILTER_INSERTION_ORDER&quot;, 
                    &quot;FILTER_LINE_ITEM&quot;, 
                    &quot;FILTER_USER_LIST&quot;
                ]
            }, 
            &quot;hour&quot;: [
                4
            ], 
            &quot;auth&quot;: &quot;user&quot;
        }
    }, 
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;order&quot;: 2, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;prefix&quot;: &quot;Audience_Mapper_&quot;, 
                        &quot;description&quot;: &quot;Name of report in DBM, should be unique.&quot;, 
                        &quot;name&quot;: &quot;recipe_name&quot;
                    }
                }, 
                &quot;timeout&quot;: 10
            }, 
            &quot;hour&quot;: [
                6
            ], 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: &quot;Audience_Mapper_DBM_Report&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                        }
                    }, 
                    &quot;schema&quot;: [
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Partner&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Partner_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Partner_Status&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Advertiser_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Status&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Integration_Code&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Currency&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Insertion_Order&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Insertion_Order_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Insertion_Order_Status&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Insertion_Order_Integration_Code&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Line_Item_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Status&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Integration_Code&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Audience_List&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Audience_List_ID&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Audience_List_Type&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Audience_List_Cost&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Impressions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Clicks&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Conversions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Post_View_Conversions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Post_Click_Conversions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Revenue&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Media_Cost&quot;
                        }
                    ]
                }
            }
        }
    }, 
    {
        &quot;mapping&quot;: {
            &quot;sheet&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 5, 
                    &quot;description&quot;: &quot;Used to map audiences to categories.&quot;, 
                    &quot;name&quot;: &quot;sheet_url&quot;
                }
            }, 
            &quot;hour&quot;: [
                6, 
                8, 
                10, 
                12, 
                14, 
                16, 
                18, 
                20, 
                22
            ], 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;tab&quot;: &quot;Audience Mapper Column Map&quot;, 
            &quot;in&quot;: {
                &quot;table&quot;: &quot;Audience_Mapper_DBM_Report&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;Place where data will be writen.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;out&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;Place where data will be writen.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }, 
                &quot;auth&quot;: &quot;service&quot;, 
                &quot;view&quot;: &quot;Audience_Mapper_Dashboard&quot;
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">donut_small</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_barnacle">JSON</span>
            <h4>Barnacle</h4>
            <p>TASK: barnacle</p>
            <p>Gives DCM clients ability to see which profiles have access to which parts of an account. Loads DCM user profile mappings using the API into BigQuery and connects to a DataStudio dashboard.</p>
            <ol>
              <li>Wait for <b>BigQuery->%(recipe_project)s->%(dataset)s->CM_*</b> to be created.</li><li>Wait for <b>BigQuery->%(recipe_project)s->%(dataset)s->Barnacle_*</b> to be created, then copy and connect the following data sources.</li><li>Join the <a hre='https://groups.google.com/d/forum/starthinker-assets' target='_blank'>StarThinker Assets Group</a> to access the following assets</li><li>Copy <a href='https://datastudio.google.com/open/1a6K-XdPUzCYRXZp1ZcmeOUOURc9wn2Jj' target='_blank'>Barnacle Profile Advertiser Map</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/1NEzrQWWnPjkD90iUwN-ASKbVBzoeBdoT' target='_blank'>Barnacle Profile Campaign Map</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/1-YGDiQPDnk0gD78_QOY5XdTXRlTrLeEq' target='_blank'>Barnacle Profile Report Map</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/1v_GRaitwPaHHKUzfJZYNBhzotvZ-bR7Y' target='_blank'>Barnacle Profile Site Map</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/14tWlh7yiqzxKJIppMFVOw2MoMtQV_ucE' target='_blank'>Barnacle Profiles Connections</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/1mavjxvHSEPfJq5aW4FYgCXsBCE5rthZG' target='_blank'>Barnacle Report Delivery Profiles</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/1Azk_Nul-auinf4NnDq8T9fDyiKkUWD7A' target='_blank'>Barnacle Roles Duplicates</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/1ogoofpKtqkLwcW9qC_Ju_JvJdIajsjNI' target='_blank'>Barnacle Roles Not Used</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/1xLgZPjOPDtmPyEqYMiMbWwMI8-WTslfj' target='_blank'>Barnacle Site Contacts Profiles</a> and connect.</li><li>Copy <a href='https://datastudio.google.com/open/1gjxHm0jUlQUd0jMuxaOlmrl8gOX1kyKT' target='_blank'>Barnacle Report</a>.</li><li>When prompted choose the new data sources you just created.</li><li>Or give these intructions to the client.</li>
            </ol>
            <pre class="view_code" id="view_code_barnacle" style="display:none;">[
    {
        &quot;dataset&quot;: {
            &quot;dataset&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;Name of Google BigQuery dataset to create.&quot;, 
                    &quot;name&quot;: &quot;dataset&quot;
                }
            }, 
            &quot;description&quot;: &quot;The dataset will hold multiple tables, amke sure it exists.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                1
            ]
        }
    }, 
    {
        &quot;dcm_api&quot;: {
            &quot;description&quot;: &quot;Will create tables with format CM_* to hold each endpoint via a call to the API list function. Exclude reports for its own task.&quot;, 
            &quot;hour&quot;: [
                1
            ], 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;accounts&quot;: {
                &quot;single_cell&quot;: true, 
                &quot;values&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer_list&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Comma separated DCM account ids.&quot;, 
                        &quot;name&quot;: &quot;accounts&quot;
                    }
                }
            }, 
            &quot;endpoints&quot;: [
                &quot;accounts&quot;, 
                &quot;subaccounts&quot;, 
                &quot;profiles&quot;, 
                &quot;advertisers&quot;, 
                &quot;campaigns&quot;, 
                &quot;sites&quot;, 
                &quot;roles&quot;
            ], 
            &quot;out&quot;: {
                &quot;auth&quot;: &quot;service&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;Google BigQuery dataset to create tables in.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }
        }
    }, 
    {
        &quot;dcm_api&quot;: {
            &quot;description&quot;: &quot;Will create tables with format CM_* to hold each endpoint via a call to the API list function. Reports run long so seperate task.&quot;, 
            &quot;hour&quot;: [
                3
            ], 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;accounts&quot;: {
                &quot;single_cell&quot;: true, 
                &quot;values&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer_list&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;Comma separated DCM account ids.&quot;, 
                        &quot;name&quot;: &quot;accounts&quot;
                    }
                }
            }, 
            &quot;endpoints&quot;: [
                &quot;reports&quot;
            ], 
            &quot;out&quot;: {
                &quot;auth&quot;: &quot;service&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;Google BigQuery dataset to create tables in.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Profile_Role_Account_SubAccount_Map&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT   P.profileId AS profileId,   P.accountId AS accountId,   P.subaccountId AS subaccountId,   P.name AS Profile_Name,    P.email AS Profile_Email,    REGEXP_EXTRACT(P.email, r&#39;@(.+)&#39;) AS Profile_Domain,   P.userAccessType AS Profile_userAccessType,    P.active AS Profie_active,    P.traffickerType AS Profile_traffickerType,    P.comments AS Profile_comments,   P.userRoleId AS Profile_userRoleId,    R.role_name AS Role_role_name,    R.role_defaultUserRole AS Role_role_defaultUserRole,    R.permission_name AS Role_permission_name,        R.permission_availability AS Role_permission_availability,   A.name AS Account_name,   A.active AS Account_active,   A.description AS Account_description,   A.locale AS Account_locale,   S.name AS SubAccount_name FROM `[PARAMETER].[PARAMETER].CM_Profiles` AS P  LEFT JOIN `[PARAMETER].[PARAMETER].CM_Roles` AS R    ON P.userRoleId=R.roleId LEFT JOIN `[PARAMETER].[PARAMETER].CM_Accounts` AS A    ON P.accountId=A.accountId LEFT JOIN `[PARAMETER].[PARAMETER].CM_SubAccounts` AS S    ON P.accountId=S.accountId   AND P.subaccountId=S.subaccountId ; &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;Combine profile, account, subaccount, and roles into one view, used by other views in this workflow.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Profile_Advertiser_Map&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT   APRASM.*,   A.advertiserId AS advertiserId,   A.name AS Advertiser_name,    A.status AS Advertiser_status,    A.defaultEmail AS Advertiser_defaultEmail,    A.suspended AS Advertiser_suspended FROM `[PARAMETER].[PARAMETER].CM_Profile_Advertisers` As PA LEFT JOIN `[PARAMETER].[PARAMETER].Barnacle_Profile_Role_Account_SubAccount_Map` AS APRASM    ON PA.profileID=APRASM.profileID LEFT JOIN `[PARAMETER].[PARAMETER].CM_Advertisers` AS A    ON PA.advertiserId=A.advertiserId ; &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;Combine profiles and advertisers.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Profile_Campaign_Map&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT   APRASM.*,   C.campaignId AS campaignId,   C.name AS Campaign_name,    C.archived AS Campaign_archived,   IF(C.startDate &lt;= CURRENT_DATE() AND C.endDate &gt;= CURRENT_DATE(), True, False) AS Campaign_running,   ROUND(TIMESTAMP_DIFF(CURRENT_TIMESTAMP(), C.lastModifiedInfo_time, DAY) / 7) AS Campaign_Modified_Weeks_Ago FROM `[PARAMETER].[PARAMETER].CM_Profile_Campaigns` As PC LEFT JOIN `[PARAMETER].[PARAMETER].Barnacle_Profile_Role_Account_SubAccount_Map` AS APRASM    ON PC.profileID=APRASM.profileID  LEFT JOIN `[PARAMETER].[PARAMETER].CM_Campaigns` AS C    ON PC.campaignId=C.campaignId ; &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;Profile to campaign mapping.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Profile_Report_Map&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT   APRASM.*,   R.reportId AS reportId,   R.name AS Report_name,    R.type AS Report_type,   R.format AS Report_format,   R.schedule_active AS Report_schedule_active,   R.schedule_repeats AS Report_schedule_repeats,   ROUND(TIMESTAMP_DIFF(CURRENT_TIMESTAMP(), R.lastModifiedTime, DAY) / 7) AS Report_Modified_Weeks_Ago,   DATE_DIFF(R.schedule_expirationDate, CURRENT_DATE(), MONTH) AS Report_Schedule_Weeks_To_Go FROM `[PARAMETER].[PARAMETER].CM_Reports` As R LEFT JOIN `[PARAMETER].[PARAMETER].Barnacle_Profile_Role_Account_SubAccount_Map` AS APRASM    ON R.profileID=APRASM.profileID ; &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;The logic query for Deal Finder, transforms report into view used by datastudio.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Profile_Site_Map&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT   APRASM.*,   S.siteId AS siteId,   S.name AS Site_Name,    S.keyName AS Site_keyName,    S.approved AS Site_approved FROM `[PARAMETER].[PARAMETER].CM_Profile_Sites` As PS LEFT JOIN `[PARAMETER].[PARAMETER].Barnacle_Profile_Role_Account_SubAccount_Map` AS APRASM    ON PS.profileID=APRASM.profileID  LEFT JOIN `[PARAMETER].[PARAMETER].CM_Sites` AS S    ON PS.siteId=S.siteId ; &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;The logic query for Deal Finder, transforms report into view used by datastudio.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Profiles_Connections&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT    APRASM.* FROM `[PARAMETER].[PARAMETER].Barnacle_Profile_Role_Account_SubAccount_Map` AS APRASM LEFT JOIN `[PARAMETER].[PARAMETER].CM_Profile_Advertisers` AS PA    ON APRASM.profileId=PA.profileId  LEFT JOIN `[PARAMETER].[PARAMETER].CM_Profile_Campaigns` AS PC    ON APRASM.profileId=PC.profileId  LEFT JOIN `[PARAMETER].[PARAMETER].CM_Profile_Sites` AS PS   ON APRASM.profileId=PS.profileId  WHERE   PA.advertiserId IS NULL   AND PC.campaignId IS NULL   AND PS.siteId IS NULL  &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;The logic query for Deal Finder, transforms report into view used by datastudio.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Report_Delivery_Profiles&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT   RD.accountId AS accountId,   RD.subaccountId AS subaccountId,   RD.reportId AS reportId,   A.name AS Account_name,   A.active AS Account_active,   SA.name as SubAccount_name,   R.name as Report_name,   R.schedule_active AS Report_schedule_active,   RD.emailOwnerDeliveryType AS Delivery_emailOwnerDeliveryType,   RD.deliveryType AS Delivery_deliveryType,   RD.email AS Delivery_email,   RD.message AS Delivery_message,   IF(RD.email in (SELECT email from `[PARAMETER].[PARAMETER].CM_Profiles`), True, False) AS Profile_Match_Exists FROM `[PARAMETER].[PARAMETER].CM_Report_Deliveries` AS RD  LEFT JOIN `[PARAMETER].[PARAMETER].CM_Accounts` AS A    ON RD.accountId=A.accountId LEFT JOIN `[PARAMETER].[PARAMETER].CM_SubAccounts` AS SA    ON RD.subaccountId=SA.subaccountId LEFT JOIN `[PARAMETER].[PARAMETER].CM_Reports` AS R    ON RD.reportId=R.reportId &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Roles_Not_Used&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT   R.accountId AS accountId,   R.subaccountId AS subaccountId,   R.roleId AS roleId,   A.name AS Account_name,   A.active AS Account_active,   SA.name AS SubAccount_name,   R.role_name as Role_role_name,   R.role_defaultUserRole AS Role_role_defaultUserRole,   R.permission_name AS Role_permission_name,   R.permission_availability AS Role_permission_availability   FROM `[PARAMETER].[PARAMETER].CM_Roles` AS R LEFT JOIN `[PARAMETER].[PARAMETER].CM_Accounts` AS A on R.accountId=A.accountId LEFT JOIN `[PARAMETER].[PARAMETER].CM_SubAccounts` AS SA on R.subaccountId=SA.subaccountId WHERE roleId NOT IN (   SELECT roleId FROM `[PARAMETER].[PARAMETER].CM_Profile_Roles`  ) &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Site_Contacts_Profiles&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; SELECT   SC.accountId AS accountId,   SC.subaccountId AS subaccountId,   SC.siteId AS siteId,   SC.contactId AS contactId,   A.name AS Account_name,   A.active AS Account_active,   SA.name as SubAccount_name,   S.name as Site_name,   S.approved AS Site_approved,   SC.email AS Site_Contact_email,   CONCAT(SC.firstName, &#39; &#39;, sc.lastname) AS Site_Contact_Name,   SC.phone AS Site_Contact_phone,   SC.contactType AS Site_Contact_contactType,   IF(sc.email in (SELECT email from `[PARAMETER].[PARAMETER].CM_Profiles`), True, False) AS Profile_Match_Exists FROM `[PARAMETER].[PARAMETER].CM_Site_Contacts` AS SC  LEFT JOIN `[PARAMETER].[PARAMETER].CM_Accounts` AS A    ON SC.accountId=A.accountId LEFT JOIN `[PARAMETER].[PARAMETER].CM_SubAccounts` AS SA    ON SC.accountId=SA.accountId    AND SC.subaccountId=SA.subaccountId LEFT JOIN `[PARAMETER].[PARAMETER].CM_Sites` AS S    ON SC.siteId=S.siteId ; &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Barnacle_Roles_Duplicates&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot; WITH   profile_counts AS (   SELECT userRoleId, COUNT(profileId) as profile_count   FROM `[PARAMETER].[PARAMETER].CM_Profiles`   GROUP BY 1  ),  permission_fingerprints AS (   SELECT     accountId,     subaccountId,     roleId,     role_name,     role_defaultUserRole,     SUM(profile_count) AS profile_count,     FARM_FINGERPRINT(       ARRAY_TO_STRING(       ARRAY_AGG(         DISTINCT permission_name ORDER BY permission_name ASC       ), &#39;,&#39;, &#39;-&#39;     )   ) AS permissions_fingerprint   FROM     `[PARAMETER].[PARAMETER].CM_Roles` AS R   LEFT JOIN profile_counts AS P   ON R.roleId = P.userRoleId   GROUP BY     accountId,     subaccountId,     roleId,     role_name,     role_defaultUserRole )  SELECT    PFL.accountId AS accountId,   A.name AS Account_name,   A.active AS Account_active,   PFL.subaccountId AS subaccountId,    SA.name AS SubAccount_name,   PFL.roleId AS roleId,   PFL.role_name AS role_name,   PFL.role_defaultUserRole AS role_defaultUserRole,   COALESCE(PFL.profile_count, 0) AS profile_count,   PFR.roleId AS duplicate_roleId,   PFR.role_name AS duplicate_role_name,   PFR.role_defaultUserRole AS duplicate_role_defaultUserRole,   COALESCE(PFR.profile_count, 0) AS duplicate_profile_count FROM permission_fingerprints AS PFL LEFT JOIN `[PARAMETER].[PARAMETER].CM_Accounts` AS A on PFL.accountId=A.accountId LEFT JOIN `[PARAMETER].[PARAMETER].CM_SubAccounts` AS SA on PFL.subaccountId=SA.subaccountId LEFT JOIN permission_fingerprints AS PFR    ON PFL.permissions_fingerprint=PFR.permissions_fingerprint   AND PFL.accountId=PFR.accountId   AND COALESCE(PFL.subaccountId, 0)=COALESCE(PFR.subaccountId, 0) WHERE PFL.roleId != PFR.roleId ; &quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;project&quot;, 
                            &quot;description&quot;: &quot;Project where BigQuery dataset will be created.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                8
            ]
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">language</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_itp">JSON</span>
            <h4>Browser Activity Dashboard</h4>
            <p>TASK: itp</p>
            <p>Visualizes a client&#39;s Campaign Manager and DV360 activity by browser and device</p>
            <ol>
              <li>Wait for <b>BigQuery->StarThinker Data->%(name)s->*</b> to be created.</li><li>Join the <a hre='https://groups.google.com/d/forum/starthinker-assets' target='_blank'>StarThinker Assets Group</a> to access the following assets</li><li>For each of the following copy and connect to the new BigQuery sources above. See <a href='https://docs.google.com/document/d/11NlVWzbw6UeSUVUeNuERZGU9FYySWcRbu2Fg6zJ4O-A/edit?usp=sharing' target='_blank'>detailed instructions</a>.</li><li>Copy <a href='https://datastudio.google.com/open/1lxRWIs3ozzWs4-9WTy3EcqMcrtYn-7nI' target='_blank'>Combined_Browser_Delivery</a>.</li><li>Copy <a href='https://datastudio.google.com/open/1CeOHxxo-yAAMWcjI1ALsu_Dv-u2W78Rk' target='_blank'>DV360_Browser_Delivery</a>.</li><li>Copy <a href='https://datastudio.google.com/open/1NlN8rel--3t9VtTuA_0y2c6dcmIYog5g' target='_blank'>CM_Browser_Delivery</a>.</li><li>Copy <a href='https://datastudio.google.com/open/1-mGW74gnWu8zKejBhfLvmgro5rlpVNkE' target='_blank'>Floodlight_Browser_Delivery</a>.</li><li>Copy <a href='https://datastudio.google.com/open/1ftGTV0jaHKwGemhSgKOcoesuWzf4Jcwd' target='_blank'>Browser Delivery Report</a>.</li><li>When prompted choose the new data sources you just created.</li><li>Or give these intructions to the client.</li>
            </ol>
            <pre class="view_code" id="view_code_itp" style="display:none;">[
    {
        &quot;dataset&quot;: {
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;dataset&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;Report suffix and BigQuery dataset to contain data.&quot;, 
                    &quot;name&quot;: &quot;dataset&quot;
                }
            }
        }
    }, 
    {
        &quot;dcm&quot;: {
            &quot;report&quot;: {
                &quot;body&quot;: {
                    &quot;format&quot;: &quot;CSV&quot;, 
                    &quot;accountId&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;integer&quot;, 
                            &quot;order&quot;: 2, 
                            &quot;description&quot;: &quot;DCM account id of client.&quot;, 
                            &quot;name&quot;: &quot;dcm_account&quot;
                        }
                    }, 
                    &quot;type&quot;: &quot;STANDARD&quot;, 
                    &quot;name&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;description&quot;: &quot;Report in DCM, should be unique.&quot;, 
                            &quot;prefix&quot;: &quot;CM_Browser_Delivery_&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }, 
                    &quot;criteria&quot;: {
                        &quot;dateRange&quot;: {
                            &quot;relativeDateRange&quot;: &quot;LAST_365_DAYS&quot;
                        }, 
                        &quot;dimensions&quot;: [
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:advertiser&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:advertiserId&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:campaign&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:campaignId&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:site&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:browserPlatform&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:platformType&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:date&quot;
                            }
                        ], 
                        &quot;metricNames&quot;: [
                            &quot;dfa:impressions&quot;, 
                            &quot;dfa:clicks&quot;, 
                            &quot;dfa:activityViewThroughConversions&quot;, 
                            &quot;dfa:activityClickThroughConversions&quot;
                        ]
                    }
                }, 
                &quot;account&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;DCM account id of client.&quot;, 
                        &quot;name&quot;: &quot;dcm_account&quot;
                    }
                }, 
                &quot;filters&quot;: {
                    &quot;dfa:advertiser&quot;: {
                        &quot;values&quot;: {
                            &quot;field&quot;: {
                                &quot;default&quot;: &quot;&quot;, 
                                &quot;kind&quot;: &quot;integer_list&quot;, 
                                &quot;order&quot;: 3, 
                                &quot;description&quot;: &quot;Comma delimited list of DCM advertiser ids.&quot;, 
                                &quot;name&quot;: &quot;dcm_advertisers&quot;
                            }
                        }
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }, 
    {
        &quot;dcm&quot;: {
            &quot;datastudio&quot;: true, 
            &quot;report&quot;: {
                &quot;account&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;DCM account id of client.&quot;, 
                        &quot;name&quot;: &quot;dcm_account&quot;
                    }
                }, 
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;description&quot;: &quot;Report in DCM, should be unique.&quot;, 
                        &quot;prefix&quot;: &quot;CM_Browser_Delivery_&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: &quot;CM_Browser_Delivery&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 1, 
                            &quot;description&quot;: &quot;BigQuery dataset to contain data.&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }
                }
            }
        }
    }, 
    {
        &quot;dcm&quot;: {
            &quot;report&quot;: {
                &quot;body&quot;: {
                    &quot;format&quot;: &quot;CSV&quot;, 
                    &quot;type&quot;: &quot;FLOODLIGHT&quot;, 
                    &quot;name&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;description&quot;: &quot;Report in DCM, should be unique.&quot;, 
                            &quot;prefix&quot;: &quot;CM_Browser_Floodlight_&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }, 
                    &quot;floodlightCriteria&quot;: {
                        &quot;metricNames&quot;: [
                            &quot;dfa:activityClickThroughConversions&quot;, 
                            &quot;dfa:activityViewThroughConversions&quot;, 
                            &quot;dfa:totalConversions&quot;
                        ], 
                        &quot;dateRange&quot;: {
                            &quot;relativeDateRange&quot;: &quot;LAST_60_DAYS&quot;
                        }, 
                        &quot;floodlightConfigId&quot;: {
                            &quot;dimensionName&quot;: &quot;dfa:floodlightConfigId&quot;, 
                            &quot;kind&quot;: &quot;dfareporting#dimensionValue&quot;, 
                            &quot;matchType&quot;: &quot;EXACT&quot;, 
                            &quot;value&quot;: {
                                &quot;field&quot;: {
                                    &quot;default&quot;: &quot;&quot;, 
                                    &quot;kind&quot;: &quot;integer&quot;, 
                                    &quot;order&quot;: 4, 
                                    &quot;description&quot;: &quot;DCM floodlight configuration id.&quot;, 
                                    &quot;name&quot;: &quot;dcm_floodlight&quot;
                                }
                            }
                        }, 
                        &quot;reportProperties&quot;: {
                            &quot;includeUnattributedIPConversions&quot;: false, 
                            &quot;includeUnattributedCookieConversions&quot;: true
                        }, 
                        &quot;dimensions&quot;: [
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:advertiser&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:advertiserId&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:campaign&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:campaignId&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:date&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:browserPlatform&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:platformType&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:activity&quot;
                            }, 
                            {
                                &quot;kind&quot;: &quot;dfareporting#sortedDimension&quot;, 
                                &quot;name&quot;: &quot;dfa:activityId&quot;
                            }
                        ]
                    }, 
                    &quot;accountId&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;integer&quot;, 
                            &quot;order&quot;: 2, 
                            &quot;description&quot;: &quot;DCM account id of client.&quot;, 
                            &quot;name&quot;: &quot;dcm_account&quot;
                        }
                    }
                }, 
                &quot;account&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;DCM account id of client.&quot;, 
                        &quot;name&quot;: &quot;dcm_account&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }, 
    {
        &quot;dcm&quot;: {
            &quot;datastudio&quot;: true, 
            &quot;report&quot;: {
                &quot;account&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;integer&quot;, 
                        &quot;order&quot;: 2, 
                        &quot;description&quot;: &quot;DCM account id of client.&quot;, 
                        &quot;name&quot;: &quot;dcm_account&quot;
                    }
                }, 
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;description&quot;: &quot;Report in DCM, should be unique.&quot;, 
                        &quot;prefix&quot;: &quot;CM_Browser_Floodlight_&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: &quot;CM_Browser_Floodlight&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 1, 
                            &quot;description&quot;: &quot;BigQuery dataset to contain data.&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }
                }
            }
        }
    }, 
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;body&quot;: {
                    &quot;timezoneCode&quot;: &quot;America/Los_Angeles&quot;, 
                    &quot;params&quot;: {
                        &quot;metrics&quot;: [
                            &quot;METRIC_IMPRESSIONS&quot;, 
                            &quot;METRIC_CLICKS&quot;, 
                            &quot;METRIC_LAST_CLICKS&quot;, 
                            &quot;METRIC_LAST_IMPRESSIONS&quot;, 
                            &quot;METRIC_REVENUE_ADVERTISER&quot;, 
                            &quot;METRIC_MEDIA_COST_ADVERTISER&quot;
                        ], 
                        &quot;type&quot;: &quot;TYPE_GENERAL&quot;, 
                        &quot;includeInviteData&quot;: true, 
                        &quot;filters&quot;: [
                            {
                                &quot;type&quot;: &quot;FILTER_PARTNER&quot;, 
                                &quot;value&quot;: {
                                    &quot;field&quot;: {
                                        &quot;default&quot;: &quot;&quot;, 
                                        &quot;kind&quot;: &quot;integer&quot;, 
                                        &quot;order&quot;: 5, 
                                        &quot;description&quot;: &quot;DBM partner id.&quot;, 
                                        &quot;name&quot;: &quot;dbm_partner&quot;
                                    }
                                }
                            }, 
                            {
                                &quot;type&quot;: &quot;FILTER_ADVERTISER&quot;, 
                                &quot;value&quot;: {
                                    &quot;field&quot;: {
                                        &quot;default&quot;: &quot;&quot;, 
                                        &quot;kind&quot;: &quot;integer_list&quot;, 
                                        &quot;order&quot;: 6, 
                                        &quot;description&quot;: &quot;Comma delimited list of DBM advertiser ids.&quot;, 
                                        &quot;name&quot;: &quot;dbm_advertisers&quot;
                                    }
                                }
                            }
                        ], 
                        &quot;groupBys&quot;: [
                            &quot;FILTER_ADVERTISER&quot;, 
                            &quot;FILTER_BROWSER&quot;, 
                            &quot;FILTER_MEDIA_PLAN&quot;, 
                            &quot;FILTER_DATE&quot;, 
                            &quot;FILTER_DEVICE_TYPE&quot;, 
                            &quot;FILTER_INSERTION_ORDER&quot;, 
                            &quot;FILTER_PAGE_LAYOUT&quot;
                        ]
                    }, 
                    &quot;metadata&quot;: {
                        &quot;dataRange&quot;: &quot;LAST_365_DAYS&quot;, 
                        &quot;title&quot;: {
                            &quot;field&quot;: {
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;description&quot;: &quot;Name of report in DBM, should be unique.&quot;, 
                                &quot;prefix&quot;: &quot;DV360_Browser_Delivery_&quot;, 
                                &quot;name&quot;: &quot;dataset&quot;
                            }
                        }
                    }
                }, 
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;description&quot;: &quot;DBM report name, should be unique.&quot;, 
                        &quot;prefix&quot;: &quot;DV360_Browser_Delivery_&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }, 
    {
        &quot;dbm&quot;: {
            &quot;datastudio&quot;: true, 
            &quot;report&quot;: {
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;description&quot;: &quot;DBM report name, should be unique.&quot;, 
                        &quot;prefix&quot;: &quot;DV360_Browser_Delivery_&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: &quot;DV360_Browser_Delivery&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;order&quot;: 1, 
                            &quot;description&quot;: &quot;BigQuery dataset to contain data.&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;
                        }
                    }, 
                    &quot;schema&quot;: [
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Advertiser_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Status&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Integration_Code&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Browser&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Campaign&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Campaign_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;DATE&quot;, 
                            &quot;name&quot;: &quot;Report_Day&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Device_Type&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Insertion_Order&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Insertion_Order_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Insertion_Order_Status&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Insertion_Order_Integration_Code&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Environment&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Currency&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Impressions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Clicks&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Post_Click_Conversions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Post_View_Conversions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Revenue_Adv_Currency&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Media_Cost_Advertiser_Currency&quot;
                        }
                    ]
                }
            }
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;table&quot;: &quot;Floodlight_Browser_Delivery&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;BigQuery dataset to contain data.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot;WITH\r\nbrowser_clean AS (\r\n  SELECT\r\n    Advertiser,\r\n    Advertiser_Id,\r\n    Campaign,\r\n    Campaign_Id,\r\n    Browser_Platform,\r\n   Activity,\r\n    Activity_ID,\r\n    CASE\r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*Chrome).*\&quot;) THEN \&quot;Chrome\&quot; \r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*Firefox).*\&quot;) THEN \&quot;Firefox\&quot; \r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*Safari).*\&quot;) THEN \&quot;Safari\&quot;\r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*iPad).*\&quot;) THEN \&quot;Safari\&quot; \r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*iPad).*\&quot;) THEN \&quot;Safari\&quot; \r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*iPhone).*\&quot;) THEN \&quot;Safari\&quot; \r\n    ELSE \&quot;Other\&quot;\r\n    END AS Clean_Browser,\r\n    Platform_Type,\r\n    Report_Day,\r\n    View_Through_Conversions,\r\n    Click_Through_Conversions,\r\n    Total_Conversions\r\n  FROM [PARAMETER].CM_Browser_Floodlight\r\n)\r\n\r\n  SELECT\r\n    *,\r\n    CASE WHEN Platform_Type=\&quot;Mobile highend: smartphone\&quot; OR Platform_Type=\&quot;Mobile midrange: feature phone\&quot; OR Platform_Type=\&quot;Tablet\&quot; THEN Total_Conversions ELSE 0 END AS Mobile_Convs,\r\n   CASE WHEN Platform_Type=\&quot;Desktop\&quot; THEN Total_Conversions ELSE 0 END AS Desktop_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Chrome\&quot; THEN Total_Conversions ELSE 0 END AS Chrome_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Safari\&quot; THEN Total_Conversions ELSE 0 END AS Safari_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Firefox\&quot; THEN Total_Conversions ELSE 0 END AS Firefox_Convs\r\n  FROM browser_clean&quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Bigquery container for data.&quot;
                        }
                    }
                ]
            }, 
            &quot;auth&quot;: &quot;service&quot;
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;table&quot;: &quot;CM_Browser_Delivery&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;BigQuery dataset to contain data.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot;WITH\r\nbrowser_clean AS (\r\n  SELECT\r\n    Advertiser,\r\n    Advertiser_Id,\r\n    Campaign,\r\n    Campaign_Id,\r\n    Site_Dcm,\r\n    Browser_Platform,\r\n  CASE\r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*Chrome).*\&quot;) THEN \&quot;Chrome\&quot; \r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*Firefox).*\&quot;) THEN \&quot;Firefox\&quot; \r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*Safari).*\&quot;) THEN \&quot;Safari\&quot;\r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*iPad).*\&quot;) THEN \&quot;Safari\&quot; \r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*iPad).*\&quot;) THEN \&quot;Safari\&quot; \r\n    WHEN REGEXP_CONTAINS(Browser_Platform, \&quot;((?i).*iPhone).*\&quot;) THEN \&quot;Safari\&quot; \r\n    ELSE \&quot;Other\&quot;\r\n    END AS Clean_Browser,\r\n    Platform_Type,\r\n    Report_Day,\r\n    Impressions,\r\n    Clicks,\r\n    View_Through_Conversions,\r\n    Click_Through_Conversions\r\n  FROM [PARAMETER].CM_Browser_Delivery\r\n)\r\n\r\n SELECT\r\n    *,\r\n   CASE WHEN Platform_Type=\&quot;Mobile highend: smartphone\&quot; OR Platform_Type=\&quot;Mobile midrange: feature phone\&quot; OR Platform_Type=\&quot;Tablet\&quot; THEN Impressions ELSE 0 END AS Mobile_Imps,\r\n   CASE WHEN Platform_Type=\&quot;Desktop\&quot; THEN Impressions ELSE 0 END AS Desktop_Imps,\r\n   CASE WHEN Platform_Type=\&quot;Connected TV\&quot; THEN Impressions ELSE 0 END AS CTV_Imps,\r\n   CASE WHEN Clean_Browser=\&quot;Chrome\&quot; THEN Impressions ELSE 0 END AS Chrome_Imps,\r\n   CASE WHEN Clean_Browser=\&quot;Safari\&quot; THEN Impressions ELSE 0 END AS Safari_Imps,\r\n   CASE WHEN Clean_Browser=\&quot;Firefox\&quot; THEN Impressions ELSE 0 END AS Firefox_Imps\r\n  FROM browser_clean&quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Bigquery container for data.&quot;
                        }
                    }
                ]
            }, 
            &quot;auth&quot;: &quot;service&quot;
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;table&quot;: &quot;DV360_Browser_Delivery&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;BigQuery dataset to contain data.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot;WITH\r\nbrowser_cleaned AS (\r\n  SELECT \r\n    Advertiser,\r\n    Advertiser_Id,\r\n    Advertiser_Currency,\r\n    Browser,\r\n    Campaign,\r\n    Campaign_Id,\r\n    Insertion_Order, \r\n    Insertion_Order_Id,\r\n    Report_Day,\r\n    Device_Type,\r\n    Environment,\r\n    Impressions,\r\n    Clicks,\r\n    Post_Click_Conversions,\r\n    Post_View_Conversions,\r\n    Revenue_Adv_Currency as Revenue,\r\n    Media_Cost_Advertiser_Currency,\r\n    CASE\r\n      WHEN REGEXP_CONTAINS(Browser, \&quot;((?i).*Chrome).*\&quot;) THEN \&quot;Chrome\&quot; \r\n      WHEN REGEXP_CONTAINS(Browser, \&quot;((?i).*Firefox).*\&quot;) THEN \&quot;Firefox\&quot; \r\n      WHEN REGEXP_CONTAINS(Browser, \&quot;((?i).*Safari).*\&quot;) THEN \&quot;Safari\&quot;\r\n      ELSE \&quot;Other\&quot;\r\n      END AS Clean_Browser,\r\n    CASE \r\n      WHEN Browser=\&quot;Safari 12\&quot; THEN \&quot;Safari 12\&quot;\r\n      WHEN Browser=\&quot;Safari 11\&quot; THEN \&quot;Safari 11\&quot;\r\n      WHEN REGEXP_CONTAINS(Browser, \&quot;((?i).*Safari).*\&quot;) AND Browser!=\&quot;Safari 12\&quot; AND Browser!=\&quot;Safari 11\&quot; THEN \&quot;Safari 10 &amp; Below\&quot;\r\n      ELSE \&quot;Non Safari\&quot;\r\n    END AS ITP_Affected_Browsers\r\n   FROM [PARAMETER].DV360_Browser_Delivery \r\n)\r\n\r\n  SELECT\r\n    *,\r\n    CASE WHEN Device_Type=\&quot;Smart Phone\&quot; OR Device_Type=\&quot;Tablet\&quot; THEN Impressions ELSE 0 END AS Mobile_Imps,\r\n   CASE WHEN Device_Type=\&quot;Desktop\&quot; THEN Impressions ELSE 0 END AS Desktop_Imps,\r\n   CASE WHEN Device_Type=\&quot;Connected TV\&quot; THEN Impressions ELSE 0 END AS CTV_Imps,\r\n   CASE WHEN Clean_Browser=\&quot;Chrome\&quot; THEN Impressions ELSE 0 END AS Chrome_Imps,\r\n   CASE WHEN Clean_Browser=\&quot;Safari\&quot; THEN Impressions ELSE 0 END AS Safari_Imps,\r\n   CASE WHEN Clean_Browser=\&quot;Firefox\&quot; THEN Impressions ELSE 0 END AS Firefox_Imps,\r\n    CASE WHEN Clean_Browser=\&quot;Chrome\&quot; THEN Revenue ELSE 0 END AS Chrome_Rev,\r\n   CASE WHEN Clean_Browser=\&quot;Safari\&quot; THEN Revenue ELSE 0 END AS Safari_Rev,\r\n   CASE WHEN Clean_Browser=\&quot;Firefox\&quot; THEN Revenue ELSE 0 END AS Firefox_Rev,\r\n   CASE WHEN Clean_Browser=\&quot;Chrome\&quot; THEN Post_Click_Conversions ELSE 0 END AS Chrome_Click_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Safari\&quot; THEN Post_Click_Conversions ELSE 0 END AS Safari_Click_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Firefox\&quot; THEN Post_Click_Conversions ELSE 0 END AS Firefox_Click_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Chrome\&quot; THEN Post_View_Conversions ELSE 0 END AS Chrome_View_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Safari\&quot; THEN Post_View_Conversions ELSE 0 END AS Safari_View_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Firefox\&quot; THEN Post_View_Conversions ELSE 0 END AS Firefox_View_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Chrome\&quot; THEN Post_Click_Conversions+Post_View_Conversions ELSE 0 END AS Chrome_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Safari\&quot; THEN Post_Click_Conversions+Post_View_Conversions ELSE 0 END AS Safari_Convs,\r\n   CASE WHEN Clean_Browser=\&quot;Firefox\&quot; THEN Post_Click_Conversions+Post_View_Conversions ELSE 0 END AS Firefox_Convs,\r\n   \r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 12\&quot; THEN Impressions ELSE 0 END AS S12_Imps,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 11\&quot; THEN Impressions ELSE 0 END AS S11_Imps,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 10 &amp; Below\&quot; THEN Impressions ELSE 0 END AS S_Imps,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Non Safari\&quot; THEN Impressions ELSE 0 END AS NS_Imps,\r\n   \r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 12\&quot; THEN Post_Click_Conversions ELSE 0 END AS S12_Click_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 11\&quot; THEN Post_Click_Conversions ELSE 0 END AS S11_Click_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 10 &amp; Below\&quot; THEN Post_Click_Conversions ELSE 0 END AS S_Click_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Non Safari\&quot; THEN Post_Click_Conversions ELSE 0 END AS NS_Click_Convs,\r\n   \r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 12\&quot; THEN Post_View_Conversions ELSE 0 END AS S12_View_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 11\&quot; THEN Post_View_Conversions ELSE 0 END AS S11_View_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 10 &amp; Below\&quot; THEN Post_View_Conversions ELSE 0 END AS S_View_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Non Safari\&quot; THEN Post_View_Conversions ELSE 0 END AS NS_View_Convs,\r\n   \r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 12\&quot; THEN Post_Click_Conversions+Post_View_Conversions ELSE 0 END AS S12_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 11\&quot; THEN Post_Click_Conversions+Post_View_Conversions ELSE 0 END AS S11_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Safari 10 &amp; Below\&quot; THEN Post_Click_Conversions+Post_View_Conversions ELSE 0 END AS S_Convs,\r\n   CASE WHEN ITP_Affected_Browsers=\&quot;Non Safari\&quot; THEN Post_Click_Conversions+Post_View_Conversions ELSE 0 END AS NS_Convs\r\n   \r\n   \r\n  FROM browser_cleaned&quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;auth&quot;: &quot;service&quot;
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;table&quot;: &quot;Combined_Browser_Delivery&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;order&quot;: 1, 
                        &quot;description&quot;: &quot;BigQuery dataset to contain data.&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;
                    }
                }
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot;WITH cm AS ( SELECT Report_Day, CASE  WHEN Platform_Type=\&quot;Desktop\&quot; THEN \&quot;Desktop\&quot; WHEN Platform_Type=\&quot;Tablet\&quot; THEN \&quot;Mobile_Tablet\&quot; WHEN Platform_Type=\&quot;Mobile highend: smartphone\&quot; THEN \&quot;Mobile_Tablet\&quot; WHEN Platform_Type=\&quot;Mobile midrange: feature phone\&quot; THEN \&quot;Mobile_Tablet\&quot; WHEN Platform_Type=\&quot;Connected TV\&quot; THEN \&quot;CTV\&quot; END AS Device_Clean, SUM(Impressions) as CM_Impressions FROM `[PARAMETER].CM_Browser_Delivery`  GROUP BY 1,2 ),  dv3 AS ( SELECT Report_Day as RD, CASE  WHEN Device_Type=\&quot;Desktop\&quot; THEN \&quot;Desktop\&quot; WHEN Device_Type=\&quot;Tablet\&quot; THEN \&quot;Mobile_Tablet\&quot; WHEN Device_Type=\&quot;Smart Phone\&quot; THEN \&quot;Mobile_Tablet\&quot; WHEN Device_Type=\&quot;Connected TV\&quot; THEN \&quot;CTV\&quot; END AS Device_Clean_DV360, SUM(Impressions) as DV360_Impressions FROM `[PARAMETER].DV360_Browser_Delivery`  GROUP BY 1,2 )  SELECT Report_Day, Device_Clean, CM_Impressions, DV360_Impressions FROM cm a JOIN dv3 b ON a.Report_Day=b.RD AND a.Device_Clean=b.Device_Clean_DV360&quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;auth&quot;: &quot;service&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">whatshot</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_deal_finder">JSON</span>
            <h4>Deal Finder</h4>
            <p>TASK: deal_finder</p>
            <p>Compares open vs. deal CPM, CPC, and CPA so that clients can decide which sites, inventory, and deals work best.</p>
            <ol>
              <li>Wait for <b>BigQuery->StarThinker Data->%(name)s->Deal_Finder_Dashboard</b> to be created.</li><li>Join the <a hre='https://groups.google.com/d/forum/starthinker-assets' target='_blank'>StarThinker Assets Group</a> to access the following assets</li><li>Copy <a href='https://datastudio.google.com/open/1QrWNTurvQT6nx20vnzdDveSzSmRjqHxQ' target='_blank'>Deal Finder Sample Data</a>.</li><li>Click Edit Connection, and change to <b>BigQuery->StarThinker Data->%(name)s->Deal_Finder_Dashboard</b>.</li><li>Copy <a href='https://datastudio.google.com/open/1fjRI5AIKTYTA4fWs-pYkJbIMgCumlMyO' target='_blank'>Deal Finder Sample Report</a>.</li><li>When prompted choose the new data source you just created.</li><li>Or give these intructions to the client.</li>
            </ol>
            <pre class="view_code" id="view_code_deal_finder" style="display:none;">[
    {
        &quot;dataset&quot;: {
            &quot;dataset&quot;: {
                &quot;field&quot;: {
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;dataset&quot;, 
                    &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                }
            }, 
            &quot;description&quot;: &quot;Create a dataset for bigquery tables.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                4
            ]
        }
    }, 
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;partners&quot;: {
                    &quot;values&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;integer_list&quot;, 
                            &quot;order&quot;: 1, 
                            &quot;description&quot;: &quot;Comma separated DBM partner ids.&quot;, 
                            &quot;name&quot;: &quot;partners&quot;
                        }
                    }
                }, 
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;description&quot;: &quot;Name of report in DBM, should be unique.&quot;, 
                        &quot;prefix&quot;: &quot;Deal_Finder_&quot;, 
                        &quot;name&quot;: &quot;recipe_name&quot;
                    }
                }, 
                &quot;data_range&quot;: &quot;LAST_30_DAYS&quot;, 
                &quot;metrics&quot;: [
                    &quot;METRIC_IMPRESSIONS&quot;, 
                    &quot;METRIC_CLICKS&quot;, 
                    &quot;METRIC_TOTAL_CONVERSIONS&quot;, 
                    &quot;METRIC_TOTAL_MEDIA_COST_ADVERTISER&quot;, 
                    &quot;METRIC_REVENUE_ADVERTISER&quot;, 
                    &quot;METRIC_ACTIVE_VIEW_MEASURABLE_IMPRESSIONS&quot;, 
                    &quot;METRIC_ACTIVE_VIEW_VIEWABLE_IMPRESSIONS&quot;
                ], 
                &quot;timezone&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;America/Los_Angeles&quot;, 
                        &quot;kind&quot;: &quot;timezone&quot;, 
                        &quot;name&quot;: &quot;recipe_timezone&quot;, 
                        &quot;description&quot;: &quot;Timezone for report dates.&quot;
                    }
                }, 
                &quot;advertisers&quot;: {
                    &quot;values&quot;: {
                        &quot;field&quot;: {
                            &quot;default&quot;: &quot;&quot;, 
                            &quot;kind&quot;: &quot;integer_list&quot;, 
                            &quot;order&quot;: 2, 
                            &quot;description&quot;: &quot;Comma separated DBM advertiser ids.&quot;, 
                            &quot;name&quot;: &quot;advertisers&quot;
                        }
                    }
                }, 
                &quot;type&quot;: &quot;TYPE_CROSS_PARTNER&quot;, 
                &quot;dimensions&quot;: [
                    &quot;FILTER_PARTNER&quot;, 
                    &quot;FILTER_ADVERTISER&quot;, 
                    &quot;FILTER_SITE_ID&quot;, 
                    &quot;FILTER_INVENTORY_SOURCE&quot;, 
                    &quot;FILTER_INVENTORY_SOURCE_TYPE&quot;, 
                    &quot;FILTER_ADVERTISER_CURRENCY&quot;, 
                    &quot;FILTER_CREATIVE_SIZE&quot;, 
                    &quot;FILTER_CREATIVE_TYPE&quot;
                ]
            }, 
            &quot;description&quot;: &quot;Create a DBM report.&quot;, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;hour&quot;: [
                3
            ]
        }
    }, 
    {
        &quot;dbm&quot;: {
            &quot;report&quot;: {
                &quot;name&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;description&quot;: &quot;Name of report in DBM, should be unique.&quot;, 
                        &quot;prefix&quot;: &quot;Deal_Finder_&quot;, 
                        &quot;name&quot;: &quot;recipe_name&quot;
                    }
                }, 
                &quot;timeout&quot;: 10
            }, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: &quot;Deal_Finder_DBM_Report&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }, 
                    &quot;schema&quot;: [
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Partner&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Partner_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Partner_Status&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Advertiser_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Status&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Integration_Code&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Site&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Site_ID&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Inventory&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Inventory_ID&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Inventory_Type&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Advertiser_Currency&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Creative_Width&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Creative_Height&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Creative_Type&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Impressions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Clicks&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Conversions&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Cost&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;FLOAT&quot;, 
                            &quot;name&quot;: &quot;Revenue&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;AV_Impressions_Measurable&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;AV_Impressions_Viewable&quot;
                        }
                    ]
                }
            }, 
            &quot;description&quot;: &quot;Copy a DBM report to BigQuery.&quot;, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;hour&quot;: [
                4
            ]
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;Deal_Finder_Dashboard&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot;SELECT Partner, Partner_ID, Advertiser, Advertiser_ID, Site, Site_ID, Inventory, Inventory_Type, Creative_Type, Creative_Size, Always_On, Deal_Impressions, Open_Impressions, Rank_Impressions, Deal_Clicks, Open_Clicks, Rank_Clicks, Deal_Conversions, Open_Conversions, Rank_Conversions, Deal_Impressions_Viewable, Open_Impressions_Viewable, Rank_Impressions_Viewable, Deal_Impressions_Measurable, Open_Impressions_Measurable, Rank_Impressions_Measurable, Deal_Cost, Open_Cost, Rank_Cost, FROM ( SELECT FIRST(Partner) AS Partner, FIRST(Partner_ID) AS Partner_ID, FIRST(Advertiser) AS Advertiser, Advertiser_ID, First(Site) AS Site, Site_ID, Inventory, Inventory_Type, Creative_Type, Creative_Width + &#39; x &#39; + Creative_Height AS Creative_Size, IF (LEFT(Inventory, 5) == &#39;AO - &#39;, True, False) AS Always_On, SUM(Deal_Impressions) AS Deal_Impressions, SUM(Open_Impressions) AS Open_Impressions, SUM(Open_Impressions) + SUM(Deal_Impressions) AS Total_Impressions, ROW_NUMBER() OVER (PARTITION BY Advertiser_ID ORDER BY Total_Impressions DESC) AS Rank_Impressions, SUM(Deal_Clicks) AS Deal_Clicks, SUM(Open_Clicks) AS Open_Clicks, SUM(Open_Clicks) + SUM(Deal_Clicks) AS Total_Clicks, ROW_NUMBER() OVER (PARTITION BY Advertiser_ID ORDER BY Total_Clicks DESC) AS Rank_Clicks, SUM(Deal_Conversions) AS Deal_Conversions, SUM(Open_Conversions) AS Open_Conversions, SUM(Open_Conversions) + SUM(Deal_Conversions) AS Total_Conversions, ROW_NUMBER() OVER (PARTITION BY Advertiser_ID ORDER BY Total_Conversions DESC) AS Rank_Conversions, SUM(Deal_Cost) AS Deal_Cost, SUM(Open_Cost) AS Open_Cost, SUM(Open_Cost) + SUM(Deal_Cost) AS Total_Cost, RANK() OVER (PARTITION BY Advertiser_ID ORDER BY Total_Cost DESC) AS Rank_Cost, SUM(Deal_Impressions_Viewable) AS Deal_Impressions_Viewable, SUM(Open_Impressions_Viewable) AS Open_Impressions_Viewable, SUM(Open_Impressions_Viewable) + SUM(Deal_Impressions_Viewable) AS Total_Impressions_Viewable, ROW_NUMBER() OVER (PARTITION BY Advertiser_ID ORDER BY Total_Impressions_Viewable DESC) AS Rank_Impressions_Viewable, SUM(Deal_Impressions_Measurable) AS Deal_Impressions_Measurable, SUM(Open_Impressions_Measurable) AS Open_Impressions_Measurable, SUM(Open_Impressions_Measurable) + SUM(Deal_Impressions_Measurable) AS Total_Impressions_Measurable, ROW_NUMBER() OVER (PARTITION BY Advertiser_ID ORDER BY Total_Impressions_Measurable DESC) AS Rank_Impressions_Measurable, FROM ( SELECT Partner, Partner_ID, Advertiser, Advertiser_ID, Site, Site_ID, Inventory, Inventory_Type, Creative_Type, Creative_Width, Creative_Height, IF(Inventory_ID IS NULL, Impressions, 0) AS Open_Impressions, IF(Inventory_ID IS NULL, 0, Impressions) AS Deal_Impressions, IF(Inventory_ID IS NULL, Clicks, 0) AS Open_Clicks, IF(Inventory_ID IS NULL, 0, Clicks) AS Deal_Clicks, IF(Inventory_ID IS NULL, Conversions, 0) AS Open_Conversions, IF(Inventory_ID IS NULL, 0, Conversions) AS Deal_Conversions, IF(Inventory_ID IS NULL, Cost, 0) AS Open_Cost, IF(Inventory_ID IS NULL, 0, Cost) AS Deal_Cost, IF(Inventory_ID IS NULL, AV_Impressions_Viewable, 0) AS Open_Impressions_Viewable, IF(Inventory_ID IS NULL, 0, AV_Impressions_Viewable) AS Deal_Impressions_Viewable, IF(Inventory_ID IS NULL, AV_Impressions_Measurable, 0) AS Open_Impressions_Measurable, IF(Inventory_ID IS NULL, 0, AV_Impressions_Measurable) AS Deal_Impressions_Measurable, FROM [[PARAMETER].Deal_Finder_DBM_Report] OMIT RECORD IF Site == &#39;Low volume inventory&#39;) GROUP By Advertiser_ID, Site_ID, Inventory, Inventory_Type, Creative_Type, Creative_Size, Always_On) WHERE Rank_Impressions &lt; 100 OR Rank_Clicks &lt; 100 OR Rank_Conversions &lt; 100 OR Rank_Cost &lt; 100;&quot;, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be written in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;The logic query for Deal Finder, transforms report into view used by datastudio.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;hour&quot;: [
                4
            ]
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">monetization_on</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_dynamic_costs">JSON</span>
            <h4>Dynamic Costs Reporting</h4>
            <p>TASK: dynamic_costs</p>
            <p>Calculate DBM cost at the dynamic creative combination level.</p>
            <ol>
              <li>Add a sheet URL. This is where you will enter advertiser and campaign level details.</li><li>Specify the DCM network ID.</li><li>Click run now once, and a tab called <strong>Dynamic Costs</strong> will be added to the sheet with instructions.</li><li>Follow the instructions on the sheet; this will be your configuration.</li><li>StarThinker will create two or three (depending on the case) reports in DCM named <strong>Dynamic Costs - ...</strong>.</li><li>Wait for <b>BigQuery->{{PROJECT}}->{{DATASET}}->Dynamic_Costs_Analysis</b> to be created or click Run Now.</li><li>Copy <a href='https://datastudio.google.com/open/1vBvBEiMbqCbBuJTsBGpeg8vCLtg6ztqA' target='_blank'>Dynamic Costs Sample Data ( Copy From This )</a>.</li><li>Click Edit Connection, and Change to <b>BigQuery->{{PROJECT}}->{{DATASET}}->Dynamic_Costs_Analysis</b>.</li><li>Copy <a href='https://datastudio.google.com/open/1xulBAdx95SnvjnUzFP6r14lhkvvVbsP8' target='_blank'>Dynamic Costs Sample Report ( Copy From This )</a>.</li><li>When prompted, choose the new data source you just created.</li><li>Edit the table to include or exclude columns as desired.</li><li>Or, give the dashboard connection intructions to the client.</li>
            </ol>
            <pre class="view_code" id="view_code_dynamic_costs" style="display:none;">[
    {
        &quot;dynamic_costs&quot;: {
            &quot;account&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;name&quot;: &quot;dcm_account&quot;, 
                    &quot;order&quot;: 0
                }
            }, 
            &quot;sheet&quot;: {
                &quot;url&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;configuration_sheet_url&quot;, 
                        &quot;order&quot;: 1
                    }
                }, 
                &quot;range&quot;: &quot;A2:B&quot;, 
                &quot;template&quot;: {
                    &quot;url&quot;: &quot;https://docs.google.com/spreadsheets/d/19J-Hjln2wd1E0aeG3JDgKQN9TVGRLWxIEUQSmmQetJc/edit?usp=sharing&quot;, 
                    &quot;range&quot;: &quot;A1&quot;, 
                    &quot;tab&quot;: &quot;Dynamic Costs&quot;
                }, 
                &quot;tab&quot;: &quot;Dynamic Costs&quot;
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;out&quot;: {
                &quot;auth&quot;: &quot;service&quot;, 
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;default&quot;: &quot;dynamic_costs&quot;, 
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;bigquery_dataset&quot;, 
                        &quot;order&quot;: 2
                    }
                }
            }
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">add_alert</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_floodlight_monitor">JSON</span>
            <h4>Floodlight Monitor</h4>
            <p>TASK: floodlight_monitor</p>
            <p>Monitor floodlight impressions specified in sheet and send email alerts.</p>
            <ol>
              <li>Specify an account_id or account_id:subaccount_id.</li><li>Will copy <a href='https://docs.google.com/spreadsheets/d/1tjF5styxMvFJsNETEa5x2F5DSmqleGl71cmujB7Ier8/edit?usp=sharing'>Floodlight Monitor Sheet</a> to the sheet you specify.</li><li>Follow instructions on sheet.</li><li>Emails are sent once a day.</li>
            </ol>
            <pre class="view_code" id="view_code_floodlight_monitor" style="display:none;">[
    {
        &quot;floodlight_monitor&quot;: {
            &quot;account&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;Specify an account_id or account_id:subaccount_id.&quot;, 
                    &quot;name&quot;: &quot;dcm_account&quot;
                }
            }, 
            &quot;sheet&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 2, 
                    &quot;description&quot;: &quot;Full URL to Google Sheet, Floodlight Monitor tab will be added.&quot;, 
                    &quot;name&quot;: &quot;sheet_url&quot;
                }
            }, 
            &quot;template&quot;: {
                &quot;template&quot;: {
                    &quot;range&quot;: &quot;A1&quot;, 
                    &quot;sheet&quot;: &quot;https://docs.google.com/spreadsheets/d/1tjF5styxMvFJsNETEa5x2F5DSmqleGl71cmujB7Ier8/edit?usp=sharing&quot;, 
                    &quot;tab&quot;: &quot;Floodlight Monitor&quot;
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;range&quot;: &quot;A2:C&quot;, 
            &quot;tab&quot;: &quot;Floodlight Monitor&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">notifications</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_hello">JSON</span>
            <h4>Say Hello</h4>
            <p>TASK: hello</p>
            <p>Recipe template for say hello.</p>
            <ol>
              <li>This should be called for testing only.</li>
            </ol>
            <pre class="view_code" id="view_code_hello" style="display:none;">[
    {
        &quot;hello&quot;: {
            &quot;say&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;Hello Once&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;Type in a greeting.&quot;, 
                    &quot;name&quot;: &quot;say_first&quot;
                }
            }, 
            &quot;sleep&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: 0, 
                    &quot;kind&quot;: &quot;integer&quot;, 
                    &quot;order&quot;: 4, 
                    &quot;description&quot;: &quot;Seconds to sleep.&quot;, 
                    &quot;name&quot;: &quot;sleep&quot;
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;error&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 3, 
                    &quot;description&quot;: &quot;Optional error for testing.&quot;, 
                    &quot;name&quot;: &quot;error&quot;
                }
            }
        }
    }, 
    {
        &quot;hello&quot;: {
            &quot;say&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;Hello Twice&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;Type in a greeting.&quot;, 
                    &quot;name&quot;: &quot;say_second&quot;
                }
            }, 
            &quot;sleep&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: 0, 
                    &quot;kind&quot;: &quot;integer&quot;, 
                    &quot;order&quot;: 4, 
                    &quot;description&quot;: &quot;Seconds to sleep.&quot;, 
                    &quot;name&quot;: &quot;sleep&quot;
                }
            }, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">notifications</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_test">JSON</span>
            <h4>Test Script</h4>
            <p>TASK: test</p>
            <p>Used by tests.</p>
            <ol>
              <li>THis should be called by the tests scripts only.</li>
            </ol>
            <pre class="view_code" id="view_code_test" style="display:none;">[
    {
        &quot;hello&quot;: {
            &quot;say&quot;: &quot;Hello At 1&quot;, 
            &quot;sleep&quot;: 0, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;hour&quot;: [
                1
            ]
        }
    }, 
    {
        &quot;hello&quot;: {
            &quot;say&quot;: &quot;Hello At 3&quot;, 
            &quot;sleep&quot;: 0, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;hour&quot;: [
                3
            ]
        }
    }, 
    {
        &quot;hello&quot;: {
            &quot;say&quot;: &quot;Hello At 23 Sleep&quot;, 
            &quot;sleep&quot;: 30, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;hour&quot;: [
                23
            ]
        }
    }, 
    {
        &quot;hello&quot;: {
            &quot;say&quot;: &quot;Hello At Anytime&quot;, 
            &quot;sleep&quot;: 0, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }, 
    {
        &quot;hello&quot;: {
            &quot;say&quot;: &quot;Hello At 1, 3, 23&quot;, 
            &quot;sleep&quot;: 0, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;hour&quot;: [
                1, 
                3, 
                23
            ]
        }
    }, 
    {
        &quot;hello&quot;: {
            &quot;say&quot;: &quot;Hello At 3 Reordered&quot;, 
            &quot;sleep&quot;: 0, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;hour&quot;: [
                3
            ]
        }
    }
]</pre>
          <td>
        </tr>
      
        <tr>
          <td style="vertical-align: top;"><i class="material-icons medium teal-text">perm_phone_msg</i></td>
          <td style="vertical-align: top;">
            <span class="trigger_code menu_link waves-effect waves-dark btn-flat grey lighten-3 right" id="trigger_code_twitter">JSON</span>
            <h4>Twitter Targeting</h4>
            <p>TASK: twitter</p>
            <p>Adjusts line item settings based on Twitter hashtags and locations specified in a sheet.</p>
            <ol>
              <li>Provide a sheets URL. No account information required.</li><li>Click <b>Run Now</b> once and a new tab called <b>Twitter Triggers</b> will be added to the sheet.</li><li>Follow instructions on the sheets tab.</li><li>Click <b>Run Now</b> again, trends are downloaded and triggered</li><li>Or give these intructions to the client.</li>
            </ol>
            <pre class="view_code" id="view_code_twitter" style="display:none;">[
    {
        &quot;dataset&quot;: {
            &quot;description&quot;: &quot;Create a dataset where data will be combined and transfored for upload.&quot;, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;dataset&quot;: {
                &quot;field&quot;: {
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 1, 
                    &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;, 
                    &quot;name&quot;: &quot;dataset&quot;
                }
            }
        }
    }, 
    {
        &quot;sheets&quot;: {
            &quot;sheet&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 2, 
                    &quot;description&quot;: &quot;URL to sheet where Line Item settings will be read from.&quot;, 
                    &quot;name&quot;: &quot;sheet_url&quot;
                }
            }, 
            &quot;description&quot;: &quot;Read mapping of hash tags to line item toggles from sheets.&quot;, 
            &quot;auth&quot;: &quot;user&quot;, 
            &quot;range&quot;: &quot;A8:T&quot;, 
            &quot;tab&quot;: &quot;Twitter Triggers&quot;, 
            &quot;template&quot;: {
                &quot;url&quot;: &quot;https://docs.google.com/spreadsheets/d/1iYCGa2NKOZiL2mdT4yiDfV_SWV9C7SUosXdIr4NAEXE/edit?usp=sharing&quot;, 
                &quot;tab&quot;: &quot;Twitter Triggers&quot;
            }, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: &quot;Twitter_Triggers&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                        }
                    }, 
                    &quot;schema&quot;: [
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Location&quot;, 
                            &quot;mode&quot;: &quot;REQUIRED&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;WOEID&quot;, 
                            &quot;mode&quot;: &quot;REQUIRED&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Hashtag&quot;, 
                            &quot;mode&quot;: &quot;REQUIRED&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;INTEGER&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Id&quot;, 
                            &quot;mode&quot;: &quot;REQUIRED&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Name&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Status&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Start_Date&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_End_Date&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Budget_Type&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Budget_Amount&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Pacing&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Pacing_Rate&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Pacing_Amount&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Frequency_Enabled&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Frequency_Exposures&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Frequency_Period&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Line_Item_Frequency_Amount&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Bid_Price&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Partner_Revenue_Model&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }, 
                        {
                            &quot;type&quot;: &quot;STRING&quot;, 
                            &quot;name&quot;: &quot;Partner_Revenue_Amount&quot;, 
                            &quot;mode&quot;: &quot;NULLABLE&quot;
                        }
                    ]
                }
            }
        }
    }, 
    {
        &quot;twitter&quot;: {
            &quot;description&quot;: &quot;Read trends from Twitter and place into BigQuery.&quot;, 
            &quot;secret&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 3, 
                    &quot;description&quot;: &quot;Twitter API secret token.&quot;, 
                    &quot;name&quot;: &quot;twitter_secret&quot;
                }
            }, 
            &quot;auth&quot;: &quot;service&quot;, 
            &quot;trends&quot;: {
                &quot;places&quot;: {
                    &quot;bigquery&quot;: {
                        &quot;table&quot;: &quot;Twitter_Triggers&quot;, 
                        &quot;columns&quot;: [
                            &quot;WOEID&quot;
                        ], 
                        &quot;dataset&quot;: {
                            &quot;field&quot;: {
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;dataset&quot;, 
                                &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                            }
                        }
                    }
                }
            }, 
            &quot;key&quot;: {
                &quot;field&quot;: {
                    &quot;default&quot;: &quot;&quot;, 
                    &quot;kind&quot;: &quot;string&quot;, 
                    &quot;order&quot;: 4, 
                    &quot;description&quot;: &quot;Twitter API key token.&quot;, 
                    &quot;name&quot;: &quot;twitter_key&quot;
                }
            }, 
            &quot;out&quot;: {
                &quot;bigquery&quot;: {
                    &quot;table&quot;: &quot;Twitter_Trends_Place&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                        }
                    }
                }
            }
        }
    }, 
    {
        &quot;lineitem&quot;: {
            &quot;read&quot;: {
                &quot;advertisers&quot;: [], 
                &quot;lineitems&quot;: [
                    9915840
                ], 
                &quot;out&quot;: {
                    &quot;bigquery&quot;: {
                        &quot;table&quot;: &quot;LineItem_Reads&quot;, 
                        &quot;dataset&quot;: {
                            &quot;field&quot;: {
                                &quot;kind&quot;: &quot;string&quot;, 
                                &quot;name&quot;: &quot;dataset&quot;, 
                                &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                            }
                        }
                    }
                }, 
                &quot;insertionorders&quot;: []
            }, 
            &quot;description&quot;: &quot;Read current lineitem settings from DBM into BigQuery, so it can be joined with Twitter analysis.&quot;, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }, 
    {
        &quot;bigquery&quot;: {
            &quot;to&quot;: {
                &quot;dataset&quot;: {
                    &quot;field&quot;: {
                        &quot;kind&quot;: &quot;string&quot;, 
                        &quot;name&quot;: &quot;dataset&quot;, 
                        &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                    }
                }, 
                &quot;view&quot;: &quot;LineItem_Writes&quot;
            }, 
            &quot;from&quot;: {
                &quot;query&quot;: &quot;SELECT o.Line_Item_Id AS Line_Item_Id, o.Partner_Name AS Partner_Name, o.Partner_Id AS Partner_Id, o.Advertiser_Name AS Advertiser_Name, o.IO_Name AS IO_Name, IFNULL(t.Line_Item_Name, o.Line_Item_Name) AS Line_Item_Name, o.Line_Item_Timestamp AS Line_Item_Timestamp , IFNULL(t.Line_Item_Status, o.Line_Item_Status) AS Line_Item_Status, o.IO_Start_Date AS IO_Start_Date, o.IO_End_Date AS IO_End_Date, o.IO_Budget_Type AS IO_Budget_Type, o.IO_Budget_Amount AS IO_Budget_Amount, o.IO_Pacing AS IO_Pacing, o.IO_Pacing_Rate AS IO_Pacing_Rate, o.IO_Pacing_Amount AS IO_Pacing_Amount, IFNULL(t.Line_Item_Start_Date, o.Line_Item_Start_Date) AS Line_Item_Start_Date, IFNULL(t.Line_Item_End_Date, o.Line_Item_End_Date) AS Line_Item_End_Date, IFNULL(t.Line_Item_Budget_Type, o.Line_Item_Budget_Type) AS Line_Item_Budget_Type, IFNULL(t.Line_Item_Budget_Amount, o.Line_Item_Budget_Amount) AS Line_Item_Budget_Amount, IFNULL(t.Line_Item_Pacing, o.Line_Item_Pacing) AS Line_Item_Pacing, IFNULL(t.Line_Item_Pacing_Rate, o.Line_Item_Pacing_Rate) AS Line_Item_Pacing_Rate, IFNULL(t.Line_Item_Pacing_Amount, o.Line_Item_Pacing_Amount) AS Line_Item_Pacing_Amount, IFNULL(t.Line_Item_Frequency_Enabled, o.Line_Item_Frequency_Enabled) AS Line_Item_Frequency_Enabled, IFNULL(t.Line_Item_Frequency_Exposures, o.Line_Item_Frequency_Exposures) AS Line_Item_Frequency_Exposures, IFNULL(t.Line_Item_Frequency_Period, o.Line_Item_Frequency_Period) AS Line_Item_Frequency_Period, IFNULL(t.Line_Item_Frequency_Amount, o.Line_Item_Frequency_Amount) AS Line_Item_Frequency_Amount, IFNULL(t.Bid_Price, o.Bid_Price) AS Bid_Price, IFNULL(t.Partner_Revenue_Model, o.Partner_Revenue_Model) AS Partner_Revenue_Model, IFNULL(t.Partner_Revenue_Amount, o.Partner_Revenue_Amount) AS Partner_Revenue_Amount, o.Current_Audience_Targeting_Ids AS Current_Audience_Targeting_Ids , o.Current_Audience_Targeting_Names AS Current_Audience_Targeting_Names FROM `[PARAMETER].LineItem_Reads` AS o LEFT JOIN ( SELECT Line_Item_Id, ANY_VALUE(SPLIT(Line_Item_Name, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_Name, ANY_VALUE(SPLIT(Line_Item_Status, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_Status, ANY_VALUE(SPLIT(Line_Item_Start_Date, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_Start_Date, ANY_VALUE(SPLIT(Line_Item_End_Date, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_End_Date, ANY_VALUE(SPLIT(Line_Item_Budget_Type, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_Budget_Type, ANY_VALUE(CAST(SPLIT(Line_Item_Budget_Amount, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))] AS FLOAT64)) AS Line_Item_Budget_Amount, ANY_VALUE(SPLIT(Line_Item_Pacing, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_Pacing, ANY_VALUE(SPLIT(Line_Item_Pacing_Rate, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_Pacing_Rate, ANY_VALUE(CAST(SPLIT(Line_Item_Pacing_Amount, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))] AS FLOAT64)) AS Line_Item_Pacing_Amount, ANY_VALUE(CAST(SPLIT(Line_Item_Frequency_Enabled, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))] AS BOOL)) AS Line_Item_Frequency_Enabled, ANY_VALUE(SPLIT(Line_Item_Frequency_Exposures, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_Frequency_Exposures, ANY_VALUE(SPLIT(Line_Item_Frequency_Period, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Line_Item_Frequency_Period, ANY_VALUE(CAST(SPLIT(Line_Item_Frequency_Amount, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))] AS INT64)) AS Line_Item_Frequency_Amount, ANY_VALUE(CAST(SPLIT(Bid_Price, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))] AS FLOAT64)) AS Bid_Price, ANY_VALUE(SPLIT(Partner_Revenue_Model, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))]) AS Partner_Revenue_Model, ANY_VALUE(CAST(SPLIT(Partner_Revenue_Amount, &#39;&gt;&#39;)[SAFE_OFFSET(IF(Triggered, 1, 0))] AS FLOAT64)) AS Partner_Revenue_Amount FROM ( SELECT WOEID, Hashtag, Line_Item_Id, Line_Item_Name, Line_Item_Status, Line_Item_Start_Date, Line_Item_End_Date, Line_Item_Budget_Type, Line_Item_Budget_Amount, Line_Item_Pacing, Line_Item_Pacing_Rate, Line_Item_Pacing_Amount, Line_Item_Frequency_Enabled, Line_Item_Frequency_Exposures, Line_Item_Frequency_Period, Line_Item_Frequency_Amount, Bid_Price, Partner_Revenue_Model, Partner_Revenue_Amount, CONCAT(CAST(WOEID AS STRING), LOWER(Hashtag)) IN (SELECT CONCAT(CAST(WOEID AS STRING), LOWER(REPLACE(name, &#39;#&#39;, &#39;&#39;))) FROM `[PARAMETER].Twitter_Trends_Place` GROUP BY 1) AS Triggered FROM `[PARAMETER].Twitter_Triggers`) GROUP BY 1) AS t ON o.Line_Item_Id=t.Line_Item_Id;&quot;, 
                &quot;legacy&quot;: false, 
                &quot;parameters&quot;: [
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                        }
                    }, 
                    {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                        }
                    }
                ]
            }, 
            &quot;description&quot;: &quot;Get all triggered lineitmes from sheet, if they have a keyword match in twitter, take the triger values, else take the default values (default&gt;trigger).  Take all non-null values from trigger and overlay over current DBM values. Will be used to upload to DBM.&quot;, 
            &quot;auth&quot;: &quot;service&quot;
        }
    }, 
    {
        &quot;lineitem&quot;: {
            &quot;write&quot;: {
                &quot;dry_run&quot;: false, 
                &quot;bigquery&quot;: {
                    &quot;table&quot;: &quot;LineItem_Writes&quot;, 
                    &quot;dataset&quot;: {
                        &quot;field&quot;: {
                            &quot;kind&quot;: &quot;string&quot;, 
                            &quot;name&quot;: &quot;dataset&quot;, 
                            &quot;description&quot;: &quot;Place where tables will be created in BigQuery.&quot;
                        }
                    }
                }
            }, 
            &quot;description&quot;: &quot;Write lineitem settings to DBM after transformation.&quot;, 
            &quot;auth&quot;: &quot;user&quot;
        }
    }
]</pre>
          <td>
        </tr>
      
      </tbody>
    </table>
  

  <br/><br/>
  <h3 id="code-tasks">Can Always Write Your Own Custom Task</h3>
  <p class="flow-text">See <a href="https://github.com/google/starthinker/tree/master/starthinker/gtech" target="_blank">StarThinker Task Samples</a> for creating a json task anyone can use.</p>


    </div>

    
      <img src="https://megadash.googleplex.com/tracking/5384865225375744" alt="Megadash Usage Tracking Pixel, see https://goto/megadash-tracking" height="1" width="1" />
    

  </body>

  

<footer class="page-footer">
  <div class="footer-copyright">
    <div class="container center">
    &copy; 2019 Google, Inc
    </div>
  </div>
</footer>


  <script type="text/javascript">
    $(document).ready(function() {
      $(".button-collapse").sideNav();
      $('select').material_select();
      $('.modal').modal();
    });
  </script>
  
  <script type="text/javascript">
    $(document).ready(function() {
      $('span.trigger_product').on('click tap', function() {
        $('table.view_product').hide();
        $('#' + this.id.replace('trigger_', 'view_') ).show();
      });
      $('span.trigger_code').on('click tap', function() {
        $('#' + this.id.replace('trigger_', 'view_') ).toggle();
      });
    });
  </script>


</html>
